{"version":3,"sources":["utilities/childrenToVersionArray.js","utilities/uuid.js","utilities/terminate.js","utilities/textToArray.js","utilities/getCandidateString.js","config.js","utilities/collectionToHtml.js","utilities/defer.js","utilities/download.js","utilities/focusOn.js","utilities/jsonParseSafe.js","utilities/htmlToCollection.js","utilities/inflate.js","utilities/message.js","utilities/readTextFile.js","utilities/selectedValueArray.js","utilities/toggleStringCase.js","utilities/tts.js","utilities/unwrap.js","utilities/wordcount.js","utilities/backupRestore.js","utilities/points.js","utilities/elapsed.js","utilities/storage.js","utilities/index.js","modules/Texteditor/bindEvents.js","modules/Texteditor/arrayToHtml.js","utilities/Parse.js","modules/Texteditor/updateKeysPressed.js","utilities/arrayToCollection.js","utilities/scrollIntoViewIfNeeded.js","modules/Texteditor/index.js","modules/Article.js","modules/Sentences.js","modules/Storage/index.js","modules/Sidebar/ToggleToInput.js","modules/Sidebar/FileRow.js","modules/divider.js","modules/Sidebar/Settings.js","modules/Sidebar/syncWithServer.js","modules/Sidebar/registerMouseEvent.js","modules/Sidebar/SidebarButton.js","modules/Sidebar/index.js","index.js"],"names":["childrenToVersionArray","children","char","arguments","length","undefined","versions","Object","toConsumableArray","map","row","hidden","classList","contains","text","concat","innerText","trim","o","pre","snA","snB","uuid","toString","Date","valueOf","re_punctuation","terminate","autoTerminate","is_closed","test","sufix","textToArray","plaintext","catenated","replace","split","s","join","re_comments","getCandidateString","value","array","constructor","Array","line","filter","config","re","lineEnd","newLine","commentChars","passiveKeys","timer","default","delay","options","flag","tag","br","markdown","scrollToSelected","v2","_config$options$optio","objectSpread","unique","html","classnames","modifiers","datasets","exclude","_row$text","_row$versions","_row$selected","selected","id","candidate","json","JSON","stringify","isEmpty","isInactive","inactive","locked","empty","keys","forEach","key","name","k","el","className","dataset","innerHTML","p","document","createElement","slice","push","register","defer","ns","fn","ms","logs","t","n","verbose","_false$verbose","console","log","clearTimeout","setTimeout","mimes","download","object","data","_object$type","type","_object$appendId","appendId","_mimes$type","slicedToArray","mime","ext","filename","element","payload","encodeURIComponent","setAttribute","style","display","body","appendChild","click","removeChild","focusOn","$el","selector","callback","els","querySelectorAll","remove","add","focus","jsonParseSafe","string","result","alt","parse","e","error","htmlToCollection","reHtmlTags","_el$innerText","nodeName","obj","inflate","asarray","SBD","sentences","messages","confirmDelete","readTextFile","file","currentTarget","files","temporaryFileReader","FileReader","Promise","resolve","reject","onerror","abort","DOMException","onload","target","readAsText","selectedValueArray","sbd","jsonSafeParse","toggleStringCase","english","languages","retry","synth","voices","lowercase","toLowerCase","uppcercase","toUpperCase","a","b","british","selectedVoice","initialize","window","speechSynthesis","getVoices","navigator","index","lang","indexOf","findIndex","Math","max","saythis","tts","SpeechSynthesisUtterance","voice","assign","volume","pitch","rate","speak","warn","methods","say","read","period","speaking","cancel","String","apply","i","unwrap","exceptions","txt","some","processline","wordcount","localStorage","utilities_backupRestore","context","backup","bak","RegExp","restore","prefix","rows","articles","settings","now","meta","username","created","modified","wordtarget","derived","r","guid","opened","_rows$settings","previous","current","purge","points","pixels","round","parseInt","isDate","isNaN","elapsed","then","Number","parts","diff","_parts","weekday","month","day","year","hour","minute","second","offset","tz","time","intervals","reduce","acc","cur","candidates","v","interval","getFullYear","origin","location","API","article","user","storage","val","onLine","this","delete","pull","fetch","method","headers","Content-Type","status","getUser","deleteArticle","article_id","updateArticlesData","construcor","Function","updateArticle","d","updateSettings","update","article_object","priority","label","defaults","averages","datas","backups","percent","A","B","min","ratio","insertRow","c","write","utilities","alert","confirm","prompt","backupRestore","collectionToHtml","deepEqual","message","bindEvents","texteditor","onkeydown","_this","passive","keySequence","updateKeysPressed","trigger","triggers","find","_this$triggers$key","code","bind","onkeyup","_this2","deselect","focusNode","getSelection","parentNode","setSelected","after","change","call","wordcounter","onclick","arrayToHtml","_collection","_options","keyHistory","arrayToCollection","_rating","score","norm","readability","ease","int","ratings","rating","Parse","classCallCheck","filterInactive","_this$options","HTMLCollection","linebreaks","unwrapColumns","toTextArray","collection","_options$filterInacti","scrollIntoViewIfNeeded","Element","prototype","centerIfNeeded","parent","parentComputedStyle","getComputedStyle","parentBorderTopWidth","getPropertyValue","parentBorderLeftWidth","overTop","offsetTop","scrollTop","overBottom","clientHeight","overLeft","offsetLeft","scrollLeft","overRight","clientWidth","alignWithTop","scrollIntoView","execCommand","Texteditor","words","showReadability","outerHTML","init","toHTML","show","sentence","querySelector","container","getElementById","keytime","_this$hidden","bool","Boolean","_this$triggers$ns","_data$meta$wordtarget","_this$re","m","Article","possibleConstructorReturn","getPrototypeOf","on","articleToggleActive","collapseSelectedParagraph","sentencesUpdateContent","typewriterMode","typewriter","forwardOnly","assertThisInitialized","toggle","u","preventDefault","stopPropagation","_this$selected","Senetences","updateSelectedParagraph","toggleInactiveFlag","carridgeReturn","deleteCurrentLine","scrollToParagraph","cr","sel","range","createRange","insertBefore","nextSibling","setStart","collapse","removeAllRanges","addRange","startup","require","Storage","list","syncId","timestamp","create","schema","exists","splice","path","local","recent","_this$current","_ref$meta","_ref2$current","ToggleToInput","props","rename","reset","_this$state","state","original","store","setState","edit","toggleEditAndFocus","_this$state2","react_default","tabIndex","onBlur","onChange","onClick","onKeyDown","blur","href","React","Component","FileRow","vertical","notifySizeChange","_ref","callbacks","getArticleByGuid","updateCurrent","handleDelete","handleWordTarget","downloadText","downloadJson","data-guid","Sidebar_ToggleToInput","TTS","Settings","readSelected","_this$article","_this$article$selecte","_this$article$textedi","cloneNode","nextElementSibling","toText","fs","visible","collapsed","strikethrough","dark","values","fontsize","splitwidth","keycapture","toggleClassName","prevProps","updates","save","persist","_this3","fontSize","_this4","_this5","getOnOff","defaultValue","getReadabilityLevel","forward","dragging","width","minWidth","threshold","temp","resize","pageX","cancelBubble","returnValue","_state","innerWidth","left","elements","onResize","div","mouse","onmousedown","ondblclick","syncWithServer","localtimestamps","localarticles","_loop","remote","registerMouseEvent","sidebar","zone","offsetWidth","getUpdatedArticles","SidebarButton","mode","handler","keydown","modifier","altKey","crtlKey","Sidebar","saveToDisk","_this2$state","toCollection","newarticles","saveDividerWidth","_this2$props","fileObj","_fileObj$wordtarget","setWordTarget","ariticle_id","makeEditable","onKeyPress","handleImport","_assertThisInitialize","that","open","handleDataRestore","_u$storage2","domId","valid","metaArray","saveAs","_fs$read","date","toISOString","defaultData","initilize","_this$state$guid","_this$state$values","_ref$splitwidth","setSyncProfile","divider","updateWordCount","Sidebar_FileRow","htmlFor","accept","getArticles","Sidebar_Settings","Sidebar_SidebarButton","mouseEvents","up","move","onmouseup","onmousemove","Sentences","bindTo","RE","ReactDOM","render","modules_Sidebar","overlay","src"],"mappings":"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","file":"static/js/main.1e830b76.chunk.js","sourcesContent":["function childrenToVersionArray(children, char = '>') {\n    // create a versions array from DOM collection\n\n    // First cast to collection of the value and visiblity\n    const data = [...children].map(row => {\n        const hidden = row.classList.contains('inactive');\n        const text = `${row.innerText}`.trim();\n\n        return { text, hidden };\n    });\n\n    // Second, cast as plaintext array (versions)\n    const versions = data.map(o => {\n        const pre = o.hidden ? char : '';\n        const text = o.text;\n\n        return `${pre}${text}`;\n    });\n\n    return [...versions];\n}\n\nexport default childrenToVersionArray;\n","let snA = 0;\nlet snB = 0;\n\n// fractionally slow runtime\n// --------------------------\n// function v1() {\n//   const a = (((snA += 1) % 6) + 10).toString(16);\n//   const b = new Date().valueOf().toString(16);\n//   const c = 1000 + ((snB += 1) % 999);\n//   return `${a}${b}${c}`;\n// }\n\nfunction v2() {\n  // alpha + timestamp + 1000 (1+11+4=16)\n  return (\n    (((snA += 1) % 6) + 10).toString(16) +\n    new Date().valueOf().toString(16) +\n    (1000 + ((snB += 1) % 999)) +\n    \"\"\n  );\n}\n\nconst uuid = v2;\nexport default uuid;\n\n/** QUOKKA INLINE UNIT TEST  * /\n\nvar max = 10000000;\nconsole.time(\"v\");\nfor(var i = 0; i < max; i ++) v1();\nconsole.timeEnd(\"v\");\n\nconsole.time(\"v\");\nfor(var i = 0; i < max; i ++) v2();\nconsole.timeEnd(\"v\");\nconsole.log(new Date())\n\n/** */\n","const re_punctuation = /(\\.|:|!|\\?|\"|\\))$/g;\n\nfunction terminate(text, autoTerminate = false) {\n    // return a closed sentnece.\n    text = text && text.trim();\n\n    if (!text) return;\n\n    var is_closed = re_punctuation.test(text);\n    var sufix = autoTerminate && !is_closed ? '.' : '';\n\n    return `${text}${sufix}`;\n}\n\nexport default terminate;\n","function textToArray(plaintext = null) {\n  // returns simple text Array\n  // correcting for double line breaks\n  // and removing hard line breaks.\n\n  if (!plaintext) return;\n\n  let catenated = plaintext.trim();\n\n  // remove carridge returns (aka CrLf => Lf)\n  if (/\\r/.test(plaintext)) catenated = catenated.replace(/\\r/gm, \"\");\n\n  // unwrap hardline breaks.\n  catenated = catenated.split(/\\n{2,}/gm);\n  catenated = catenated.map(\n    s =>\n      s\n        .replace(/\\n+/g, \" \")\n        .replace(/\\s{2,}/g, \" \")\n        .trim() || \"\"\n  );\n\n  // normalize the paragraph breaks\n  catenated = catenated.join(\"\\n\\n\");\n  catenated = catenated.split(/\\n/g);\n\n  return [...catenated];\n}\n\n/** quokka inline test * /\ntextToArray(\"one\\ntwo\\n\\nthree\"); //?\n/** */\n\nexport default textToArray;\n","import terminate from './terminate';\nimport textToArray from './textToArray';\n\nconst re_comments = /^([/>?=!]\\s*?)/;\n\nfunction getCandidateString(value, autoTerminate = false) {\n    // recieve String or Array\n    // returns string\n    // parse the DOM elements to simple Array\n\n    if (!value) return '';\n\n    const is_array = value && value.constructor === Array;\n    const array = is_array ? value : textToArray(value);\n    return [...array]\n        .map(line =>\n            re_comments.test(line) ? null : terminate(line, autoTerminate)\n        )\n        .filter(s => s && s.length)\n        .join(' ')\n        .trim();\n}\n\nexport default getCandidateString;\n","const re = {\n    lineEnd: /(^\\w|[.?!;]\\s+\\w)/g, // alpha. beta? charlie! delta;\n    newLine: /^-{3,}/, // the magic sequence to add <br/> via editor\n    commentChars: /^(\\s+)?[>?!/]+(\\s+)?/, // so far ... the prefix comment tokens\n    passiveKeys: /^(arrow|shift|control|alt|tab|page|home|end|escape)/i, // keys that dont alter the sentence\n};\nlet options = {\n    flag: 'inactive',\n    re: /^(\\s+)?[>?!/]+(\\s+)?/,\n    tag: 'p',\n    br: '<br/>',\n    markdown: false,\n    scrollToSelected: true,\n};\nconst timer = {\n    // after: 2500, // the last event to fire, this is used to persist\n    default: 100, // the normal event delay in miliseconds\n    delay: 0, // dynamic var update depending on event type\n};\nexport default {\n    re,\n    timer,\n    options,\n};\n","import uuid from './uuid';\nimport getCandidateString from './getCandidateString';\nimport config from '../config';\n\nexport default v2;\n\nfunction v2(array, options) {\n    // returns HTML String\n    // Expected collection schema:\n    // [{selected: true, text: String, versions: Object}, ...]\n\n    if (!array) return;\n\n    const { tag, br, re, flag } = { ...config.options, options };\n    let unique = true; // ensure only one selected DOM element\n\n    const html = array.map(row => {\n        let classnames = {};\n        let modifiers = {};\n        let datasets = {};\n\n        const exclude = /^(text|versions|locked|selected|html|classnames)/i;\n        const { text = '', versions = '', selected = '' } = row;\n        const id = versions ? uuid() : '';\n        const candidate = versions && getCandidateString(versions);\n        const value = text || candidate || '';\n        const json = versions ? JSON.stringify(versions) : '';\n\n        const isEmpty = versions && !candidate ? true : false;\n        const isInactive = re.test(value) || row.inactive;\n\n        // derived classNames\n        classnames.locked = versions ? true : null;\n        classnames[flag] = isInactive ? true : null;\n        classnames.selected = unique && selected ? true : null;\n        classnames.empty = isEmpty ? true : null;\n\n        // only add non-existant keys\n        Object.keys(row).forEach(key => {\n            if (exclude.test(key) || key in classnames) return;\n\n            // seperate modifiers\n            if (/^m-/i.test(key)) {\n                // Boolean values signify modifiers\n                if (/^(true)$/i.test(row[key])) {\n                    return (modifiers[key] = true);\n                }\n\n                // String values are datasets and need to be string JSON\n                return (datasets[key] = JSON.stringify(row[key]));\n            }\n\n            // append classnames\n            classnames[key] = true;\n        });\n\n        // append classnames array\n        if (row && row.classnames) {\n            row.classnames.forEach(name => {\n                classnames[name] = true;\n            });\n        }\n\n        // flattern keys into string\n        classnames =\n            Object.keys(classnames)\n                .map(key => (classnames[key] ? key : ''))\n                .join(' ')\n                .trim() || null;\n\n        // ensure the \"selected\" element is unique\n        unique = selected ? false : unique;\n\n        // catenate datasets\n        datasets = Object.keys(datasets).map(k => `data-${k}='${datasets[k]}'`);\n        datasets = ` ${datasets.join(' ')}`;\n        datasets = datasets.trim() ? ` ${datasets}` : '';\n\n        const el = {};\n        el.id = id ? ` id=\"${id}\"` : '';\n        el.className = classnames ? ` class=\"${classnames}\"` : '';\n        el.dataset = versions ? ` data-versions='${json}'` : '';\n        el.innerHTML = value.replace(re, '') || br;\n\n        // catenate the modifiers\n        modifiers = Object.keys(modifiers).map(k => `${k}=\"\"`);\n        modifiers = `${modifiers.join(' ')}`;\n        modifiers = modifiers.trim() ? ` ${modifiers}` : '';\n\n        const p = document.createElement(tag);\n        p.id = id;\n        p.dataset.versions = JSON.stringify(candidate);\n\n        return `<${tag}${el.id}${el.className}${modifiers}${datasets}${\n            el.dataset\n        }>${el.innerHTML}</${tag}>`;\n        // return el.outerHTML;\n    });\n\n    // ensure there is always an extra last line\n    if (!/<br\\s?\\/?>/i.test(html.slice(-1))) {\n        html.push(`<${tag}>${br}</${tag}>`);\n    }\n\n    return html.join('\\n');\n}\n","const register = {\n    /*\n        {\n            ns: String // namespace\n            fn: Function // callback\n            ns: Number // milisecond delay\n            t: Symbol // placeholder for Timer\n            n: Number // counts executions\n        }\n    */\n};\n\nfunction defer(ns, fn, ms = 250, logs = false) {\n    if (!ns || !fn) return;\n\n    // create non-existant register\n    if (!register[ns]) {\n        // logs && console.log('CREATE REGISTER [%s]', ns);\n        register[ns] = { ns, fn, ms, t: null, n: 0, verbose: logs === true };\n    }\n\n    // clear existing timeout & create new one\n    let { verbose = false } = false; //register[ns];\n    register[ns].n += 1; //?\n\n    verbose && console.log('CALLING REGISTER [%s]', ns, register[ns].n);\n    clearTimeout(register[ns].t);\n    register[ns].t = setTimeout(() => {\n        verbose && console.log('EXECUTING REGISTER [%s]', ns, register[ns].n);\n        delete register[ns];\n        return fn();\n    }, ms);\n}\n\n/** QUOKKA INLINE UNIT TEST * /\nlet q = 0;\nconst mms = 1500;\nconst callback = () => {\n  console.log(\"[%s]\", (q += 1));\n};\n\n// this function should only be called twice.\ndefer(\"abc\", callback, mms, true);\ndefer(\"xyz\", callback, mms);\n\ndefer(\"abc\", callback, mms);\ndefer(\"xyz\", callback, mms);\n\ndefer(\"abc\", callback, mms);\ndefer(\"xyz\", callback, mms);\n\ndefer(\"abc\", callback, mms);\ndefer(\"xyz\", callback, mms);\n\ndefer(\"abc\", callback, mms);\ndefer(\"xyz\", callback, mms);\n\n/** */\n\nexport default defer;\n","// download a JSON file\n\nconst mimes = {\n    // key      mime    extension\n    json: [\"json\", \"json\"],\n    text: [\"text\", \"txt\"],\n    markdown: [\"text\", \"md\"]\n};\n\nfunction download(object) {\n    const { name, id, data, type = \"json\", appendId = true } = object;\n    const [mime, ext] = mimes[type];\n    const sufix = appendId ? `-${id}` : ``;\n    const filename = `${name}${sufix}.${ext}`;\n    const text = type === \"json\" ? JSON.stringify(data) : data;\n\n    const element = document.createElement(\"a\");\n    const payload = encodeURIComponent(text);\n\n    element.setAttribute(\"href\", `data:text/${mime};charset=utf-8,${payload}`);\n    element.setAttribute(\"download\", `${filename}`);\n    element.style.display = \"none\";\n\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n}\n\nexport default download;\n","function focusOn($el, selector, callback) {\n  // ensure there are no others\n  var els = document.querySelectorAll(`.${selector}`);\n  [...els].forEach(el => el.classList.remove(selector));\n\n  $el.setAttribute(\"tabindex\", \"-1\");\n  $el.classList.add(selector);\n  $el.focus();\n\n  return callback && callback();\n}\n\nexport default focusOn;\n","// jsonParseSafe\nexport default function(string, alt = '') {\n    let result;\n    const apost = '’'; // Try to coeherse JSON errors\n    try {\n        string = string.replace(/'/g, apost);\n        result = JSON.parse(string);\n    } catch (e) {\n        console.error('JSON parse Error!\\nUsing alternative:[%s]', alt);\n        console.log(e);\n        result = alt;\n    }\n    return result;\n}\n","import jsonParseSafe from './jsonParseSafe';\n\nfunction htmlToCollection(children) {\n    const reHtmlTags = /<[^<]+>/gi;\n    const array = [...children].map(el => {\n        const { innerText = '', innerHTML, dataset, nodeName, classList } = el;\n\n        if (!/(div|p)/i.test(nodeName)) return null;\n\n        const text = (innerText && innerText.trim()) || '';\n        const string = text || (innerHTML && innerHTML.replace(reHtmlTags, ''));\n\n        // const inactive = classList.contains(\"inactive\");\n        // const selected = (classList && classList.contains(\"selected\")) || undefined;\n        const versions =\n            dataset.versions && jsonParseSafe(dataset.versions, string);\n        const obj = {};\n\n        obj.text = string || '';\n        versions && (obj.versions = versions);\n\n        // convert all classNames to object keys\n        // classList.remove(\"locked\"); // derived is versions exist\n        [...classList].forEach(s => (obj[s] = s));\n\n        return obj;\n    });\n    return array.filter(row => row);\n}\n\nexport default htmlToCollection;\n","import SBD from \"sbd\";\n\nfunction inflate(text, asarray = false) {\n  // returns sentences broken into lines\n  const array = SBD.sentences(text);\n  return asarray ? array : array.join(\"\\n\");\n}\n\nexport default inflate;\n","const messages = {\r\n  confirmDelete: `\r\nYou are unlocking this paragraph. \r\n\r\nThis will delete the working versions and destill \r\nthe paragraph to the currently elected candidate.\r\n\r\n[CANCEL] to keep working versions\r\n[OK] to discard versions\r\n`\r\n};\r\n\r\nexport default function(key) {\r\n  return messages[key] || `WARNING:\\n\\nCan't find [${key}] message.`;\r\n}\r\n","/*\n<label for=\"uploadInput\">\n    <span>upload</span>\n    <input id=\"uploadInput\" type=\"file\" style=\"display:none;\" accept=\"text/*\">\n</label>\n*/\nconst readTextFile = e => {\n    const inputFile = e.currentTarget.files;\n    const file = inputFile[0];\n    const filename = file.name;\n\n    const temporaryFileReader = new FileReader();\n\n    return new Promise((resolve, reject) => {\n        temporaryFileReader.onerror = () => {\n            temporaryFileReader.abort();\n            reject(new DOMException('Problem parsing input file.'));\n        };\n\n        temporaryFileReader.onload = e => {\n            const result = {\n                name: filename,\n                result: e.target.result,\n            };\n            resolve(result);\n        };\n        temporaryFileReader.readAsText(file);\n    });\n};\n\nexport default readTextFile;\n","import sbd from 'sbd';\nimport jsonSafeParse from './jsonParseSafe';\n\nfunction selectedValueArray(selected) {\n    if (!selected) return;\n    let { innerText, dataset } = selected;\n    const versions = dataset.versions;\n\n    // if there are versions and the innerText is \"empty\"\n    // then the line was deactivate by the sentence editor\n    selected.classList.remove('empty');\n    if (!innerText.replace(/^\\(empty\\)$/, '')) {\n        selected.classList.add('empty');\n        innerText = '(empty)';\n    }\n\n    innerText = innerText ? sbd.sentences(innerText) : [''];\n    const array = dataset.versions ? jsonSafeParse(versions) : innerText;\n\n    return array;\n}\n\nexport default selectedValueArray;\n","function toggleStringCase(string) {\n    const lowercase = string.toLowerCase();\n    const uppcercase = string.toUpperCase();\n    const lineEnd = /(^\\w|[.?!;]\\s+\\w)/g;\n\n    string =\n        string !== uppcercase\n            ? uppcercase\n            : lowercase.replace(lineEnd, (a, b) => a.toUpperCase());\n\n    return string;\n}\n\nexport default toggleStringCase;\n","var british = /^en-(uk|gb)/i;\n\nvar english;\nvar languages;\nvar retry;\nvar synth, voices;\nvar selectedVoice = null;\n\nfunction initialize() {\n    synth = window.speechSynthesis;\n    voices = synth.getVoices();\n    languages = languages || navigator.languages;\n\n    if (!voices) {\n        // console.warn(\"Voices not loaded. Reloading\");\n        retry && clearTimeout(retry);\n        retry = setTimeout(initialize, 150);\n        return retry;\n    }\n\n    let index = null;\n\n    // filter for browser language\n    console.log(voices.length, languages);\n\n    voices = voices.filter(o => o.lang.indexOf(languages[1]) + 1);\n    english = voices.filter(o => british.test(o.lang));\n\n    index = english.length && english.findIndex(o => /female/gi.test(o.name));\n    index = Math.max(index, 0);\n\n    console.log('TTS initialized', english.length, index);\n\n    selectedVoice = english.length ? english[index] : voices[0];\n    console.log('selectedVoice', selectedVoice);\n}\n\nfunction setVoice(i = 0) {\n    (english && english.length) || initialize();\n    selectedVoice = english[i];\n    return selectedVoice;\n}\n\nfunction saythis(text, n = '') {\n    const tts = new SpeechSynthesisUtterance();\n    const voice = selectedVoice || null;\n\n    if (!voice) {\n        return setTimeout(() => {\n            console.warn('Say this is not ready. Reloading.');\n            initialize();\n            saythis(text, n);\n        }, 450);\n    }\n\n    Object.assign(tts, {\n        volume: 1,\n        pitch: 1,\n        rate: 1,\n        voice,\n        text,\n    });\n\n    // console.log('say [%s]', tts.text, tts.text.length);\n    return synth.speak(tts);\n}\n\nfunction textToSpeech(array, period = '') {\n    // @array can be an Array of String (to split)\n\n    // this is a toggle function\n    // if it is already spleaking it stop\n    // otherwise it sets up and starts to read;\n\n    if (!synth) {\n        initialize();\n    }\n\n    if (synth.speaking) return synth.cancel();\n    if (!array) return;\n\n    let text = array.constructor === Array ? array : array.split('\\n');\n    text = text.filter(s => String(s || ''));\n\n    // speach dialog refinements\n    // break into short phrases or sentences to avoid word limt\n    // flatten nested sentence arrays\n    text = text.map(s => s.replace(/[“”_]+/gm, '')); // avoid saying QUOTE.\n    text = text.map(line => line.split(/[.]/g));\n    text = [].concat.apply([], text);\n\n    console.log('Total sentences [%s]', text.length);\n\n    // read each sentence\n    text.forEach((s, n) => saythis(`${s}${period}`, n));\n}\n\nconst methods = {\n    initialize,\n    say: saythis,\n    read: textToSpeech,\n    voice: setVoice,\n    speaking: () => window.speechSynthesis.speaking,\n    cancel: () => window.speechSynthesis.cancel(),\n};\n\n//window.TTS = methods;\n\nexport default methods;\n","function unwrap(text = \"\", exceptions) {\n  // unwrap hardline breaks.\n  let catenated = text;\n  catenated = catenated.split(/\\n{2,}/gm);\n  catenated = catenated.map(s =>\n    exceptions ? processline(s, exceptions) : catenate(s)\n  );\n\n  // normalize the paragraph breaks\n  catenated = catenated.join(\"\\n\\n\");\n  catenated = catenated.split(/\\n/g);\n\n  return [...catenated];\n}\n\nfunction catenate(text) {\n  return (\n    text\n      .replace(/\\n+/g, \" \")\n      .replace(/\\s{2,}/g, \" \")\n      .trim() || \"\"\n  );\n}\n\nfunction processline(text, exceptions) {\n  let string = \"\";\n  text.split(/\\n/g).forEach(line => {\n    const txt = String(line || \"\").trim();\n    const test = exceptions.some(re => re.test(txt));\n    if (!txt) return;\n    string += test ? `\\n${txt}\\n` : `${txt} `;\n  });\n  return string.replace(/\\n{2,}/, \"\\n\").trim();\n}\n\nexport default unwrap;\n\n/** * /\nlet text;\n\ntext = `\n            CHARACTER (V.O)\n        (parenthesis)\n    Alpha beta charlie delta echo\n    foxtro. Golf hotel indigo juliet\n        (more wrylys)\n    Kilo lima mama niner oscar papa\n    quebec romeo sierra tango uniform\n    violet whiskey exray zebra.\n`;\n\nunwrap(text); //?\nunwrap(text, [/^[^a-z]+$/, /^\\(.*\\)$/]); //?\n\n/** */\n","function wordcount(value) {\r\n    value = String(value || '');\r\n\r\n    if (!value) return 0;\r\n\r\n    // collapse hyphenations into one entity\r\n    value = value.replace(/(\\w)[-]+(\\w)/g, '$1$1');\r\n\r\n    // normalize non-word chars .,:; etc.\r\n    value = value.replace(/[\\W\"]+/g, ' ');\r\n\r\n    // remove double spaces\r\n    value = value.replace(/(\\s{1,})/g, ' ');\r\n\r\n    // remove trailing spaces\r\n    value = value.trim();\r\n\r\n    return value.length ? value.split(' ').length : 0;\r\n}\r\n\r\nexport default wordcount;\r\n","let localStorage = window.localStorage;\n\nfunction backup(ns = '') {\n    let bak = null;\n    const re = new RegExp(`^${ns}`);\n\n    Object.keys(localStorage)\n        .filter(k => re.test(k))\n        .forEach((k, i) => {\n            const key = k.replace(re, '');\n            bak = bak || {};\n            bak[`BAK-${key}`] = localStorage[k];\n        });\n\n    return bak;\n}\n\nfunction restore(ns = '', obj) {\n    if (!obj) return;\n    let prefix = ns ? `${ns}-` : '';\n    const rows = {\n        articles: [],\n        settings: {},\n    };\n\n    Object.keys(obj).forEach((k, i) => {\n        const key = k.replace(/(^[^-]+-+)/, '');\n        const value = obj[k];\n\n        let row = /^[[{'\"]/.test(value) ? JSON.parse(obj[k]) : value;\n        const now = new Date().valueOf();\n\n        if (/[a-z0-9]{16}$/.test(k)) {\n            if (!('data' in row || 'meta' in row)) {\n                //console.log('old schema ....... ');\n                row = {\n                    // provisionsal meta data\n                    // this will be updated by the articles object\n                    meta: {\n                        uuid: key,\n                        name: `Untitled ${i}`,\n                        username: null,\n                        created: now,\n                        modified: now,\n                        wordtarget: 0,\n                    },\n                    data: row,\n                };\n            }\n            rows[key] = row;\n            return;\n        }\n\n        // apart from actual data and these records\n        // all other rows are discarded\n        if (/(settings|articles)$/i.test(key)) {\n            rows[key] = row;\n        }\n    });\n\n    // we need to transpose the row metadata and articles metadata\n    // and elect an article as the \"current\" article as a setting prop\n    // and update each rows modified date.\n    const derived = [];\n    rows.articles.forEach((r, i) => {\n        const id = r.uuid || r.guid;\n        const now = new Date().valueOf();\n\n        rows[id].meta = { ...r };\n        rows[id].meta.uuid = id;\n        rows[id].meta.modified = now;\n\n        delete rows[id].meta.opened;\n\n        // append the derived meta Object\n        derived.push({\n            uuid: id,\n            name: r.name,\n            modified: now,\n            created: now,\n        });\n    });\n    // replace the original collection with the new derived array.\n    rows.articles = derived;\n\n    // examine the settings and ensure there is a \"current\" value\n    const { previous, current } = rows.settings;\n    rows.settings.current = previous || current || derived[0].uuid;\n    delete rows.settings.previous; // deprecated former name\n    delete rows.settings.settings; // a nesting precaution\n\n    // clean up illegal keys eg. {0: \"a\", 1: \"b\" ...}\n    // properties are expected to be alpha word strings ONLY\n    Object.keys(rows.settings).forEach(r => {\n        if (/^[0-9]+$/.test(r)) {\n            // console.log('delete invalid key [%s]', r);\n            delete rows.settings[r];\n        }\n    });\n\n    // finally save the coersed schema to disk\n    // articles Collection, settings Object and article Object(s)\n    Object.keys(rows).forEach(r => {\n        const obj = rows[r];\n        const string = JSON.stringify(obj);\n        localStorage[`${prefix}${r}`] = string;\n    });\n\n    return localStorage;\n}\n\nfunction keys() {\n    return Object.keys(localStorage);\n}\n\nfunction purge(ns = '') {\n    Object.keys(localStorage).forEach(k =>\n        k.indexOf(ns) + 1 ? delete localStorage[k] : null\n    );\n}\nfunction context(object) {\n    // set the context of localstrorage\n    // this is mostly for unit testing\n    localStorage = object;\n}\n\nexport default {\n    context,\n    backup,\n    restore,\n    purge,\n    keys,\n};\n","function points(pixels) {\n    // https://everythingfonts.com/font/tools/units/px-to-pt\n    if (!pixels || typeof pixels !== 'number') return;\n\n    const pica = 0.75292857248934;\n    let points = Math.round(pixels * pica);\n    points = parseInt(points, 10);\n    return points;\n}\n\nexport default points;\n","function interval(then, now = null) {\n    const parts = then.toString().split(/[\\s:]/g); //?\n\n    then = then.valueOf();\n    now = now || new Date().valueOf();\n    const diff = now - then;\n\n    //   if (!diff) {\n    //     return null;\n    //   }\n\n    // local time and date\n    const [weekday, month, day, year, hour, minute, second, offset, tz] = parts;\n\n    // just the current time\n    const time = `${hour}:${minute}`;\n\n    const intervals = [\n        { name: 'milisecond', value: 1 },\n        { name: 'second', value: 1000 },\n        { name: 'minute', value: 60 },\n        { name: 'hour', value: 60 },\n        { name: 'day', value: 24 },\n        { name: 'week', value: 7 },\n        { name: 'month', value: 52 / 12 },\n        { name: 'year', value: 12 },\n    ];\n\n    // append accumulated time diff to interval Object\n    intervals.reduce((acc, cur) => {\n        cur.diff = acc / cur.value;\n        return acc / cur.value; //?\n    }, diff);\n\n    // remove falsey values\n    const candidates = intervals.filter(v => v.diff >= 1); //?\n    const candidate = intervals[candidates.length - 1]; //?\n\n    return {\n        ...candidate,\n        time,\n        weekday,\n        month,\n        day: Number(day),\n        year: Number(year),\n        hour: Number(hour),\n        minute: Number(minute),\n        second: Number(second),\n        offset,\n        tz,\n    };\n}\n\nfunction isDate(value) {\n    return value && value !== 'Invalid Date' && !isNaN(value) ? true : false;\n}\n\nfunction elapsed(then, now = null) {\n    // integrity check dates, and if \"then\" date is in the future\n    now = now || new Date();\n    then = typeof then === 'string' ? new Date(Number(then)) : new Date(then);\n    if (!isDate(then) || !isDate(now) || then > now) return null;\n\n    //   quick diff ...\n    if (now.valueOf() - then.valueOf() < 1000 * 30) {\n        return `Now`;\n    }\n\n    const e = interval(then, now);\n    e.diff = parseInt(e.diff);\n\n    let result;\n    switch (e.name) {\n        case 'milisecond':\n            result = `Now`;\n            break;\n        case 'second':\n            if (e.diff < 30) {\n                result = `Now`;\n                break;\n            }\n            result = `${parseInt(e.diff)} seconds ago`;\n            break;\n        case 'minute':\n            if (e.diff < 2) {\n                result = `A minute ago`;\n                break;\n            }\n            result = `${parseInt(e.diff)} minutes ago`;\n            break;\n\n        case 'hour':\n            if (e.diff < 2) {\n                result = 'An hour ago';\n                break;\n            }\n\n            if (e.diff < 12) {\n                result = `${e.diff} hours ago`;\n                break;\n            }\n\n            result = `At ${e.time}`;\n            break;\n\n        case 'day':\n            if (e.diff < 2) {\n                result = `Yesterday at ${e.time}`;\n                break;\n            }\n            result = `${e.weekday} at ${e.time}`;\n            break;\n\n        case 'week':\n            if (e.diff < 2) {\n                result = `Last ${e.weekday} at ${e.time}`;\n                break;\n            }\n            result = `${e.weekday} ${e.day} ${e.month} at ${e.time}`;\n            break;\n\n        case 'month':\n            if (Number(e.year) === now.getFullYear()) {\n                result = `${e.weekday} ${e.day} ${e.month} at ${e.time}`;\n                break;\n            }\n\n        // eslint-disable-next-line\n        default:\n            result = `${e.day} ${e.month} ${e.year} ${e.time}`;\n            break;\n    }\n    return result;\n}\n\n/** quokka inline * /\n\nconst then = new Date(1971, 4, 31, 23, 59, 58); //?\nconst now = new Date(1971, 5, 1, 1, 1, 1); //?\nelapsed(then, now); //?\n\n/** */\n\nexport default elapsed;\n","import defer from './defer';\n\nlet origin = document.location.origin;\norigin = /localhost/i.test(origin) ? origin.replace(/[0-9]+$/, '5000') : origin;\nconsole.log('API origin', origin);\n\nconst API = {\n    settings: `${origin}/api/v1.0/settings/`,\n    article: `${origin}/api/v1.0/article/`,\n    user: `${origin}/api/v1.0/user/`,\n};\n\nfunction storage(sufix = null) {\n    let delay = 250;\n    const ns = ['rewrite', sufix].filter(val => val).join('-');\n    const apiPushDelay = 10 * 1000; // 10 seconds\n    const { onLine } = window.navigator;\n\n    // this looks strange. leave it! it's for JEST testing.\n    const localStorage = this.localStorage || window.localStorage;\n\n    return {\n        data: () => {\n            return localStorage;\n        },\n\n        delete: () => {\n            delete localStorage[ns];\n        },\n\n        pull: (guid, fn) => {\n            if (!onLine) fn(null);\n\n            console.log('pull from api %s (%s)', guid, API.user);\n\n            fetch(`${API.user}${guid}`, {\n                method: 'GET',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n            })\n                .then(r => r.json())\n                .then(json => {\n                    const status = 200;\n                    const settings = { ...json.settings };\n                    let previous =\n                        settings.previous || settings.current || null;\n\n                    // articles is a contrived index of metadata\n                    let articles = Object.keys(json)\n                        .filter(k => /^[a-z0-9]{16}/.test(k))\n                        .map(r => {\n                            return json[r].meta;\n                        });\n\n                    // deleting \"settings\" leaves the raw article rows\n                    delete json.settings;\n\n                    const data = {\n                        ...json,\n                        settings,\n                        articles,\n                        previous,\n                    };\n                    fn({\n                        status,\n                        data,\n                    });\n                });\n        },\n        getUser: username => {\n            if (!onLine) {\n                console.log('not online');\n                return;\n            }\n            return fetch(`${API.user}${username}`, {\n                method: 'GET',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n            }).then(r => r.json());\n        },\n\n        deleteArticle: article_id => {\n            if (!onLine) {\n                console.log('not online');\n                return;\n            }\n\n            if (!article_id) {\n                console.error('property missing [%s]', article_id);\n                return;\n            }\n\n            fetch(`${API.article}${article_id}`, {\n                method: 'DELETE',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n            })\n                .then(r => r.json())\n                .then(console.log);\n        },\n        updateArticlesData: fn => {\n            // refresn the meta collection\n            // returns Array of meta data\n            const uuid = /[a-z][a-z0-9]{15}$/i;\n            const articles = [];\n            const keys = Object.keys(localStorage).filter(k => uuid.test(k));\n            keys.forEach(key => {\n                const a = JSON.parse(localStorage[key]);\n                articles.push(a.meta);\n            });\n            localStorage['rewrite-articles'] = JSON.stringify(articles);\n            return fn && fn.construcor === Function ? fn(articles) : articles;\n        },\n\n        // push artice to remote server\n        // username         String\n        // article_id       String\n        // payload          Object or String\n\n        updateArticle: (username, article_id, payload) => {\n            if (!onLine) {\n                console.log('not online');\n                return;\n            }\n\n            if (!username || !article_id || !payload) {\n                console.error(\n                    'property missing user[%s] uuid[%s]',\n                    username,\n                    article_id,\n                    payload\n                );\n                return;\n            }\n\n            const stringify =\n                payload.construcor === String\n                    ? payload\n                    : JSON.stringify(payload);\n\n            fetch(`${API.article}${username}/${article_id}`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: stringify,\n            })\n                .then(r => r.json())\n                .then(d => console.log(d, username, article_id));\n        },\n        updateSettings: body => {\n            const username = body.guid;\n            if (!username) {\n                console.warn('Cant push settings. No username', body);\n                return;\n            }\n            fetch(`${API.settings}${username}`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(body),\n            })\n                .then(r => r.json())\n                .then(d => console.log(d));\n        },\n        update: article_object => {\n            const { uuid } = article_object;\n            fetch(`${API.article}${uuid}`, {\n                method: 'PUT',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(article_object),\n            })\n                .then(r => r.json())\n                .then(d => console.log(d));\n        },\n\n        push: (guid = null, priority = 0) => {\n            if (!onLine) {\n                console.log('not online');\n                return;\n            }\n            if (!guid) {\n                console.log('no guid');\n                return;\n            }\n\n            console.log('push to api %s', guid, API.settings, API.article);\n            return defer(\n                'push',\n                function() {\n                    let data = {};\n\n                    Object.keys(localStorage)\n                        .filter(k => /^rewrite/i.test(k))\n                        .map(name => {\n                            const key = name.replace(/^([^-]+-+)/, '');\n                            data[key] = localStorage[name];\n                            return name;\n                        });\n\n                    // settings is a seperate API call\n                    // it needs to include previous (aka current)\n                    // and ensure the key names are kosher\n\n                    let settings = {};\n                    data.settings = JSON.parse(data.settings);\n                    Object.keys(data.settings)\n                        .filter(k => /^([a-z]+)$/i.test(k))\n                        .forEach(k => {\n                            if (/^settings/i.test(k)) return;\n                            settings[k] = data.settings[k];\n                        });\n\n                    fetch(`${API.settings}${guid}`, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                        },\n                        body: JSON.stringify(settings),\n                    })\n                        .then(r => r.json())\n                        .then(d => console.log(d));\n\n                    // articles have a new schema it is a\n                    // catentation of data and article meta data\n                    // the API will insert or update articles\n\n                    console.log(data.articles);\n                    JSON.parse(data.articles).forEach(r => {\n                        const key = r.guid || r.uuid;\n                        const article = {\n                            meta: {\n                                uuid: key,\n                                username: guid,\n                                created: r.created,\n                                modified: r.modified || r.opened,\n                                name: r.name,\n                                wordtarget: r.wordtarget,\n                            },\n                            data: JSON.parse(data[key]),\n                        };\n\n                        fetch(`${API['article']}${guid}/${key}`, {\n                            method: 'POST',\n                            headers: {\n                                'Content-Type': 'application/json',\n                            },\n                            body: JSON.stringify(article),\n                        })\n                            .then(r => r.json())\n                            .then(d => console.log(d));\n                    });\n                },\n                priority || apiPushDelay\n            );\n        },\n\n        backup: (label = null) => {\n            /*\n             * a discreet save, and drasric change dectector\n             * if too much change happerns, a new record is\n             * created as a precaution\n             * */\n\n            const id = `${ns}-backup`;\n            const defaults = { averages: [], datas: [] };\n            const threshold = 100 - 22; // % of difference\n            const name = label || new Date().valueOf();\n\n            return defer(\n                id,\n                function() {\n                    const current = localStorage[ns] || null;\n                    const row = { tag: name, data: current };\n\n                    let index = 0;\n                    let backups = localStorage[id] || null;\n                    let percent = [99];\n                    let array = [row];\n\n                    backups = backups ? JSON.parse(backups) : defaults;\n\n                    if (backups.datas.length) {\n                        index = backups.datas.length - 1;\n                        const A = JSON.stringify(row);\n                        const B = JSON.stringify(backups.datas.slice(-1));\n                        const min = Math.min(A.length, B.length);\n                        const max = Math.max(A.length, B.length);\n                        const ratio = parseInt((min / max) * 100, 10);\n\n                        const total = backups.averages.reduce(\n                            (a, c) => a + Number(c || 0)\n                        );\n                        const mean = total / backups.averages.length;\n                        const insertRow = (ratio / mean) * 100 < threshold;\n\n                        // console.log(\n                        //     'INSERT',\n                        //     insertRow,\n                        //     (ratio / mean) * 100,\n                        //     threshold\n                        // );\n\n                        // if a dramatic difference is detected then add another row\n                        if (insertRow) {\n                            console.warn(\n                                'Insert backup. [%s] (%s)',\n                                insertRow,\n                                threshold\n                            );\n                            backups.datas.push(row);\n                        } else {\n                            // console.log('update', index);\n                            backups.averages.push(ratio);\n                            backups.datas[index] = row;\n                        }\n\n                        percent = backups.averages.slice(-25);\n                        array = backups.datas;\n                    }\n\n                    backups = {\n                        averages: percent,\n                        datas: array,\n                    };\n\n                    localStorage[id] = JSON.stringify(backups);\n                },\n                1000\n            );\n        },\n\n        read: fn => {\n            const data = localStorage[ns] || null;\n            const isJson = data && /^[[{\"]/.test(data);\n            const object = isJson ? JSON.parse(data) : data;\n            return fn && fn.construcor === Function ? fn(object) : object;\n        },\n\n        write: (obj, async = false) => {\n            const fn = () => (localStorage[ns] = JSON.stringify(obj));\n            return async ? defer(ns, fn, delay, true) : fn();\n        },\n    };\n}\n\nexport default storage;\n","import childrenToVersionArray from './childrenToVersionArray';\nimport collectionToHtml from './collectionToHtml';\nimport deepEqual from 'deep-is';\nimport defer from './defer';\nimport download from './download';\nimport focusOn from './focusOn';\nimport htmlToCollection from './htmlToCollection';\nimport inflate from './inflate';\nimport message from './message';\nimport readTextFile from './readTextFile';\nimport selectedValueArray from './selectedValueArray';\nimport toggleStringCase from './toggleStringCase';\nimport tts from './tts';\nimport unwrap from '../utilities/unwrap';\nimport uuid from './uuid';\nimport wordcount from './wordcount';\nimport backupRestore from './backupRestore';\nimport points from './points';\nimport elapsed from './elapsed';\nimport jsonParseSafe from './jsonParseSafe';\nimport storage from './storage';\n\nexport default {\n    alert,\n    confirm,\n    prompt,\n\n    backupRestore,\n    childrenToVersionArray,\n    collectionToHtml,\n    deepEqual,\n    defer,\n    elapsed,\n    download,\n    focusOn,\n    htmlToCollection,\n    inflate,\n    jsonParseSafe,\n    message,\n    points,\n    readTextFile,\n    selectedValueArray,\n    storage,\n    time,\n    toggleStringCase,\n    tts,\n    unwrap,\n    uuid,\n    wordcount,\n};\n\nfunction time() {\n    return new Date().toString().replace(/.* (\\d+:\\d+:\\d+) .*/g, '$1');\n}\n\n// const { prompt, confirm, alert } = windowdd\nfunction prompt(s, value) {\n    return window.prompt(s, value);\n}\n\nfunction confirm(s) {\n    return window.confirm(s);\n}\n\nfunction alert(s) {\n    return window.alert(s);\n}\n","function bindEvents() {\n    const { texteditor } = this;\n\n    texteditor.onkeydown = handleKeyDown.bind(this);\n    texteditor.onkeyup = handleKeyUp.bind(this);\n    texteditor.onclick = handleClick.bind(this);\n}\n\nexport default bindEvents;\n\nfunction handleKeyDown(e) {\n    // if the row is flagged (ie. locked) then skip\n    // all non-passive key strokes\n\n    const passive = this.re.passiveKeys.test(e.key);\n    const versions = this.selected && this.selected.dataset.versions;\n\n    if (versions && !passive) {\n        console.log('versions and NOT passive');\n        return false;\n    }\n\n    // execute the registered triggers\n    const keySequence = this.updateKeysPressed(e, true);\n    const trigger = Object.keys(this.triggers).find(key => {\n        const { re, fn } = this.triggers[key];\n        return re && re.test(keySequence) ? fn : null;\n    });\n\n    console.log('ONKEYDOWN', e.key, e.code, keySequence);\n    return this.trigger(trigger, e);\n}\n\nfunction handleKeyUp(e) {\n    this.deselect();\n\n    const passive = this.re.passiveKeys.test(e.key);\n    const { type, key } = e;\n    const { focusNode } = window.getSelection();\n    const { nodeName } = focusNode.parentNode;\n    let el = focusNode.parentNode;\n\n    // Enter will copy the id attribute to an empty node\n    // the id MUST stay unique\n    if (/^enter/i.test(key)) {\n        focusNode.id = '';\n        this.deselect();\n        return;\n    }\n\n    if (nodeName !== 'P') {\n        console.log('not P tag', type);\n        return;\n    }\n\n    const { innerText } = el;\n\n    // ignore empty lines.\n    if (!innerText || !innerText.trim()) {\n        console.log('no inner text');\n        this.deselect();\n        return;\n    }\n\n    // set \"parent\" DOM element\n    this.setSelected(el);\n\n    console.log('ONKEYUP [%s] <%s>', type, nodeName, key);\n\n    // change the ms delay and ensure arrowkeys are processed immediately\n    const ms = this.timer.after;\n    this.timer.delay = passive ? 75 : this.timer.default;\n\n    // after all triggers always emit the change event.\n    this.defer('change', () => this.triggers.change.fn.call(this, e));\n\n    // refresh the wordcounter\n    this.wordcounter();\n\n    // this MUST be the very last trigger event.\n    this.defer('after', () => this.triggers.after.fn.call(this), ms);\n}\n\nfunction handleClick(e) {\n    this.deselect();\n    this.setSelected(e.target);\n    this.triggers.click && this.triggers.click.fn.call(this, e);\n}\n","import config from \"../../config\";\nlet { options } = config;\n\nfunction arrayToHtml(array, obj) {\n  // update the global parsing settings\n  if (obj) {\n    options = {\n      ...options,\n      ...obj\n    };\n  }\n\n  // no array ... exit\n  if (!array) return;\n\n  // shortcut to the settings\n  const { flag, re, tag, br } = options;\n\n  // iterare over incoming array of strings\n  // output a catenated DOM string (innerHTML)\n  return [...array]\n    .map(s => {\n      let innerText = `${s}`.replace(re, \"\").trim() || br;\n      innerText = typeof s !== \"string\" ? br : innerText;\n\n      let className = [];\n\n      re.test(s || \"\") && className.push(flag);\n\n      // s && s.className && className.push(s.className);\n      className = className.length ? className.join(\" \") : null;\n      className = (className && ` class=\"${className}\"`) || \"\";\n\n      return `<${tag}${className}>${innerText}</${tag}>`;\n    })\n    .join(\"\\n\");\n}\n\nexport default arrayToHtml;\n","import collectionToHtml from '../utilities/collectionToHtml';\nimport htmlToCollection from '../utilities/htmlToCollection';\nimport unwrapColumns from '../utilities/unwrap';\nimport arrayToCollection from '../utilities/arrayToCollection';\n\nlet _collection;\n\nclass Parse {\n    constructor(value = null, options = {}) {\n        this.options = {\n            flag: 'inactive',\n            re: /^(\\s+)?[>?!/]+(\\s+)?/,\n            unwrap: true, // unwrap hard breaks\n            tag: 'p',\n            br: '<br/>',\n            markdown: false,\n            filterInactive: true, // see toTextArray()\n            ...options,\n        };\n\n        // cast the value as Object literal\n        if (!value) value = '';\n\n        if (value.data) {\n            console.warn('Coersing data from Object');\n            value = value.data;\n        }\n\n        const { re, unwrap, markdown } = this.options;\n\n        const constructor = value.constructor;\n        let type =\n            (constructor === Object && 'object') ||\n            (constructor === String && 'string') ||\n            (constructor === Array && 'array') ||\n            (constructor === HTMLCollection && 'html') ||\n            'unknown';\n\n        if (type === 'object' && value.data) {\n            console.warn('Coerse data array');\n            type = 'array';\n            value = value.data;\n        }\n\n        // determine input value and parse as\n        // collection schema\n        switch (type) {\n            case 'string':\n                // this is a MD of txt file convert it to collection\n                //? permit fountain screenplay detection\n\n                value = linebreaks(value);\n                value = unwrap ? unwrapColumns(value) : value.split(/\\n/g);\n                value = arrayToCollection(value, re, markdown);\n                break;\n\n            case 'array':\n                // this can be either a simple text array\n                // or a previously fromatted collection (eg. from disk)\n                value = arrayToCollection(value, re, markdown);\n                break;\n\n            case 'html':\n                // this is a collection of HTML nodes\n                value = htmlToCollection(value);\n                break;\n\n            default:\n                console.error(\n                    'WARNING! switch fallthrough for',\n                    type,\n                    constructor,\n                    value\n                );\n                break;\n        }\n        // assign to private value\n        _collection = [...value];\n    }\n\n    toHTML() {\n        const { options } = this;\n        return collectionToHtml.call(this, _collection, options);\n    }\n\n    toText() {\n        const array = toTextArray(_collection, this.options);\n        let string = array.join('\\n');\n        string = string.replace(/(\\s+)?$/g, '');\n\n        return string;\n    }\n\n    toArray() {\n        return toTextArray(_collection, this.options);\n    }\n\n    toCollection() {\n        return _collection;\n    }\n}\n\nexport default Parse;\n\nfunction toTextArray(collection, options) {\n    // retrun simple Array of paragraph Strings\n    // @collection = schema object\n\n    const { filterInactive = false } = options;\n\n    return [...collection]\n        .map(o => (filterInactive ? getOutputText(o) : `${o.text}`))\n        .filter(s => s !== null);\n}\n\nfunction linebreaks(plaintext = '') {\n    // remove carridge returns (aka CrLf => Lf)\n    if (/\\r/.test(plaintext)) plaintext = plaintext.replace(/\\r/gm, '');\n    return plaintext;\n}\n\nfunction getOutputText(object) {\n    // @object = line Object\n    // returns String or null (if the ignore pattern is matched)\n    // lines with the value (empty)\n    // lines with inactive flag\n\n    if (object.inactive || object.empty) return null;\n    if (/\\(empty\\)/.test(object.text)) return null;\n    return `${object.text}`;\n}\n","let timer = null; // timer symbol\nlet keyHistory = []; // stack of keyspressed\nconst reset = 250; // truncate history miliseconds\n\nexport default function(e, join) {\n  const string = e.key.trim() || e.code;\n\n  keyHistory.push(string);\n\n  timer && clearTimeout(timer);\n  timer = setTimeout(() => (keyHistory = []), reset);\n\n  // retrun catenated strings OR array literal?\n  return join ? keyHistory.join(\"\") : [...keyHistory];\n}\n","//! import marked from 'marked';\n//! import markdown from './markdown';\n\nimport readability from 'readability-meter';\nexport default arrayToCollection;\n\n//! marked.setOptions({ headerIds: false });o\n\n/*\n\n{\n    html: String (rendered markdown)\n    text: String (plaintext)\n    inactive: Boolean (derived by RegEx)\n    classnames: Array (of Strings)\n    readability: Object\n\n}\n\n9 100-90.00    very-easily\n8 90.0–80.0   easy\n7 80.0–70.0   fairly-easy\n6 70.0–60.0   plain-english\n5 60.0–50.0   fairly-difficult\n4 50.0–30.0   difficult\n3 30.0–00.0    very-difficult\n\n\n*/\nconst ratings = [\n    'very-easy',\n    'easy',\n    'fairly-easy',\n    'plain-english',\n    'fairly-difficult',\n    'difficult',\n    'very-difficult',\n    'unknown', // empty string\n];\n\nfunction rating(row = '') {\n    if (!row) return { score: null, name: 'undefined' };\n\n    let { score } = readability.ease(`${row}`);\n    let int = parseInt(score / 10, 10); // eg. 25.34234234 = 2\n    let norm; // normalize to array index\n    norm = Math.min(int, 10);\n    norm = Math.max(3, norm);\n    norm = 10 - norm - 1;\n    norm = Math.max(0, norm);\n\n    //console.log(1111, parseInt(score, 10), int, norm, ratings[norm]);\n    return { score: norm, name: ratings[norm || 0] };\n}\n\nfunction arrayToCollection(array, re = /^>/, md = false) {\n    return array.map(row => {\n        const obj =\n            typeof row === 'string'\n                ? {\n                      html: null, // markdown render\n                      text: `${row}`.trim(),\n                      inactive: re.test(row),\n                      classnames: [],\n                  }\n                : row;\n\n        const { score, name } = rating(obj.text);\n        if (name) {\n            obj.classnames = obj.classnames || [];\n            obj.classnames.push(`read-${name}`);\n            //obj.classnames.push(`read-${score}`);\n        }\n\n        /* //! remove markdown ... for now\n        if (false && md && obj.text) {\n            obj.html = marked(obj.text).replace(/\\n+/g, '');\n            obj.html = unwrap(obj.html).trim() || null;\n\n            md = markdown(obj.text);\n            md.splice(-1, 1);\n            md.forEach(val => {\n                obj.classnames = obj.classnames || [];\n                obj.classnames.push(`md-${val}`);\n            });\n        }*/\n        return obj;\n    });\n}\n\n// recursively unwrapp the nested tags\n// eg. <a><bc>def</bc></a> ==> def\n// function unwrap(string = '') {\n//     const re = new RegExp(`^<([^>]+)>(.*)</\\\\1>$`, 'gm');\n//     return re.test(string) ? unwrap(string.replace(re, '$2')) : string;\n// }\n","// polyfill for non-webkit browsers\n// https://gist.github.com/hsablonniere/2581101\nfunction scrollIntoViewIfNeeded() {\n    if (!Element.prototype.scrollIntoViewIfNeeded) {\n        Element.prototype.scrollIntoViewIfNeeded = function(centerIfNeeded) {\n            centerIfNeeded = arguments.length === 0 ? true : !!centerIfNeeded;\n\n            var parent = this.parentNode,\n                parentComputedStyle = window.getComputedStyle(parent, null),\n                parentBorderTopWidth = parseInt(\n                    parentComputedStyle.getPropertyValue('border-top-width')\n                ),\n                parentBorderLeftWidth = parseInt(\n                    parentComputedStyle.getPropertyValue('border-left-width')\n                ),\n                overTop = this.offsetTop - parent.offsetTop < parent.scrollTop,\n                overBottom =\n                    this.offsetTop -\n                        parent.offsetTop +\n                        this.clientHeight -\n                        parentBorderTopWidth >\n                    parent.scrollTop + parent.clientHeight,\n                overLeft =\n                    this.offsetLeft - parent.offsetLeft < parent.scrollLeft,\n                overRight =\n                    this.offsetLeft -\n                        parent.offsetLeft +\n                        this.clientWidth -\n                        parentBorderLeftWidth >\n                    parent.scrollLeft + parent.clientWidth,\n                alignWithTop = overTop && !overBottom;\n\n            if ((overTop || overBottom) && centerIfNeeded) {\n                parent.scrollTop =\n                    this.offsetTop -\n                    parent.offsetTop -\n                    parent.clientHeight / 2 -\n                    parentBorderTopWidth +\n                    this.clientHeight / 2;\n            }\n\n            if ((overLeft || overRight) && centerIfNeeded) {\n                parent.scrollLeft =\n                    this.offsetLeft -\n                    parent.offsetLeft -\n                    parent.clientWidth / 2 -\n                    parentBorderLeftWidth +\n                    this.clientWidth / 2;\n            }\n\n            if (\n                (overTop || overBottom || overLeft || overRight) &&\n                !centerIfNeeded\n            ) {\n                this.scrollIntoView(alignWithTop);\n            }\n        };\n    }\n}\n\nexport default scrollIntoViewIfNeeded;\n","// import marked from 'marked';\n// import markdown from '../../utilities/markdown';\nimport bindEvents from './bindEvents';\nimport config from '../../config';\nimport arrayToHtml from './arrayToHtml';\nimport defer from '../../utilities/defer';\nimport uuid from '../../utilities/uuid';\nimport inflate from '../../utilities/inflate';\nimport updateKeysPressed from './updateKeysPressed';\nimport Parse from '../../utilities/Parse';\nimport wordcount from '../../utilities/wordcount';\nimport arrayToCollection from '../../utilities/arrayToCollection';\nimport scrollIntoViewIfNeeded from '../../utilities/scrollIntoViewIfNeeded';\nimport readability from 'readability-meter';\n\ndocument.execCommand('defaultParagraphSeparator', false, 'p');\n\nclass Texteditor {\n    constructor(id, options) {\n        const container = document.getElementById(id);\n        const texteditor = document.createElement('article');\n\n        texteditor.setAttribute('contenteditable', '');\n        texteditor.setAttribute('spellcheck', 'true');\n\n        container.innerHTML = '';\n        container.appendChild(texteditor);\n\n        this.id = id; // container ID\n        this.parent = null;\n        this.keytime = null;\n        this.selected = null;\n        this.markdown = null;\n        this.scrollToSelected = true;\n        this.words = 0;\n        this.wordtarget = 0;\n        this.showReadability = true;\n\n        this.container = container;\n        this.texteditor = texteditor;\n        this.data = {};\n\n        this.triggers = {\n            click: {\n                fn: s => console.warn('Default event. CLICK [%s]', s),\n            },\n            change: {\n                fn: s => console.warn('Default event. CHANGE [%s]', s),\n            },\n            after: {\n                fn: s => console.warn('Default event. AFTER [%s]', s),\n            },\n            wordcounter: { fn: function() {} },\n        };\n\n        // import external config settings\n        Object.assign(this, config, options);\n\n        let { hidden = false } = this;\n\n        // external modules\n        bindEvents.bind(this)();\n        this.defer = defer.bind(this);\n        this.uuid = uuid.bind(this);\n        this.arrayToHtml = arrayToHtml.bind(this);\n        this.updateKeysPressed = updateKeysPressed.bind(this);\n\n        // extends Mozilla with polyfill methods\n        if (Element && !Element.scrollIntoViewIfNeeded) {\n            scrollIntoViewIfNeeded();\n        }\n\n        // and lastly ... instanate\n        this.init();\n        this.show(!hidden);\n    }\n\n    bindTo(parent) {\n        this.parent = parent;\n    }\n\n    show(bool) {\n        bool = bool === undefined ? true : Boolean(bool);\n\n        this.hidden = bool !== true;\n        this.container.classList[this.hidden ? 'add' : 'remove']('hidden');\n    }\n\n    trigger(ns, e) {\n        if (!ns || !this.triggers[ns]) return;\n\n        const { fn, data } = this.triggers[ns];\n        const result = fn.call(this, e);\n\n        // pass result to callback\n        if (data && data.constructor === Function) {\n            console.log(result, data);\n            data.call(this, result);\n        }\n\n        return result;\n    }\n\n    on(key, re, fn, data) {\n        this.triggers[key] = { re, fn, data };\n    }\n\n    deselect(selector = 'selected') {\n        // if markdown is asctive, render it\n        // if (this.markdown) {\n        //     console.log('render markdown');\n        // }\n        const array = this.texteditor.querySelectorAll(`.${selector}`);\n        [...array].forEach(el => el.classList.remove(selector));\n        this.selected = null;\n    }\n\n    setSelected(el = null) {\n        let { id, innerText } = el;\n\n        // console.log('[%s]', el.innerText.trim(), el);\n        // if this element has text then set focus attributes\n\n        if (!innerText || !innerText.trim()) {\n            console.warn('Element has no innerText value');\n            return;\n        }\n\n        el.id = id || this.uuid();\n        el.classList.add('selected');\n\n        // if there is a version array, lock it\n        const locked = el.dataset && el.dataset.versions;\n        const method = locked ? 'add' : 'remove';\n        el.classList[method]('locked');\n\n        // if markdown is active ...\n        // if (this.markdown) {\n        //     console.log('restore RAW text data');\n        // }\n\n        this.selected = el;\n    }\n\n    focus() {\n        // if there is a selected element ...\n        // scroll to that element\n        let el = this.selected;\n        if (this.scrollToSelected && el) el.scrollIntoViewIfNeeded();\n    }\n\n    toggleMarkdown() {\n        this.markdown = false;\n    }\n\n    wordcounter = fn => {\n        this.defer.call(\n            this,\n            'wordcounter',\n            () => {\n                fn = fn || this.triggers.wordcounter.fn;\n                let diff;\n                const el = document.createElement('span');\n                const { innerText } = this.texteditor;\n\n                el.classList.add('value');\n                this.words = wordcount(innerText);\n                el.innerHTML = this.words;\n\n                if (this.wordtarget) {\n                    diff = this.wordtarget - this.words;\n                    let warn = diff < 0 ? '-warn' : '';\n\n                    el.classList.add(`value${warn}`);\n                    el.innerHTML = `${this.words}/${this.wordtarget}`;\n                }\n\n                if (this.showReadability) {\n                    let { score } = readability.ease(innerText);\n                    score = parseInt(score, 10);\n                    el.innerHTML = `${el.innerHTML} (${score}%)`;\n                }\n                return fn(el.outerHTML);\n            },\n            150\n        );\n    };\n    /*\n    init method is used to open or create an article.\n    this method will also try to populate the related\n    Sentence instanate with content.\n    */\n    init = array => {\n        // console.log(array);\n        if (!array) return;\n\n        const p = new Parse(array, { markdown: this.markdown });\n        this.texteditor.innerHTML = p.toHTML();\n\n        this.show();\n        this.wordcounter();\n\n        const selected = this.texteditor.querySelector('.selected');\n        let sentence = null;\n\n        if (!selected) return;\n\n        // give the DOM time to render, then focus on selected.\n        setTimeout(() => this.focus(), 850);\n\n        // activate current element and inject sentence data\n        this.setSelected(selected);\n\n        // it might be locked or not .... get an Array\n        sentence = selected.dataset.versions\n            ? JSON.parse(selected.dataset.versions)\n            : inflate(selected.innerText);\n\n        this.parent.init(sentence);\n    };\n\n    setWordTarget(n = 0) {\n        this.wordtarget = n;\n    }\n\n    reset(data) {\n        // clear the text editor\n        // clear selected element\n        // clear related editors\n        this.parent.texteditor.innerText = '';\n        this.texteditor.innerText = '';\n        this.parent.selected = null;\n        this.selected = null;\n        this.words = 0;\n        // this.wordtarget = 0;\n        this.data = {};\n\n        // backward compatability\n        if (data.meta) {\n            console.warn('Reduce article to data', data);\n\n            const { wordtarget = null } = data.meta;\n            this.wordtarget = wordtarget;\n\n            data = data.data;\n        }\n\n        this.init(data);\n    }\n\n    // updates the currently selected element\n    // transforms (versions) string array into innerText\n    // this is called when the Sentence updates the Paragrpah\n    update(array = null) {\n        console.log('UPDATE [%s]\\n', array, this.markdown);\n\n        const { selected } = this;\n        const { newLine, commentChars } = this.re;\n\n        if (!selected || !array) return;\n\n        // ensure the parent node is up-to-date\n        selected.dataset.versions = JSON.stringify(array);\n\n        // with the sentences catenate the paragraph innerText\n        // ignore commented lines, and modify empty lines.\n        let text = array\n            .map(s => {\n                let txt = newLine.test(s) ? '\\n\\n' : s;\n                txt = commentChars.test(txt) ? '' : txt;\n                return `${txt}`.trim();\n            })\n            .filter(s => s && s.trim())\n            .join(' ')\n            .trim();\n\n        // remove markdown classNames\n        [...selected.classList].forEach(\n            m => /^md/.test(m) && selected.classList.remove(m)\n        );\n\n        // render markdown paragraph and add new classNames\n        if (this.markdown && text) {\n            const obj = arrayToCollection([text], commentChars, true)[0];\n            selected.dataset.text = text;\n            text = obj.html || '';\n\n            if (obj.classnames && obj.classnames.length) {\n                obj.classnames.forEach(name => selected.classList.add(name));\n            }\n        }\n\n        // if there is no text, then mark the row & inject (empty)\n        selected.classList[text ? 'remove' : 'add']('empty');\n        selected.classList.add('locked');\n        selected.classList.add('selected');\n        selected.innerHTML = text || `(empty)`;\n\n        // this.parent.wordcount();\n\n        return selected;\n    }\n}\n\nexport default Texteditor;\n","import Texteditor from './Texteditor/';\nimport u from '../utilities/';\n\nclass Article extends Texteditor {\n    constructor(id, options) {\n        super(id, options);\n\n        this.on('click', null, articleToggleActive);\n        this.on('toggle', /^(altalt)$/i, articleToggleActive);\n        this.on('collapse', /^(shiftshift)$/i, collapseSelectedParagraph);\n\n        this.on('change', null, sentencesUpdateContent);\n        this.on(\n            'typewriter',\n            /(home|end|page|arrow|delete|backspace)/i,\n            typewriterMode\n        );\n\n        this.typewriter = typewriter.call(this);\n    }\n}\n\nexport default Article;\n\nfunction collapseSelectedParagraph() {\n    if (!this.selected) {\n        console.warn('no selected paragraph');\n        return;\n    }\n    this.selected.classList.toggle('inactive');\n}\n\nfunction sentencesUpdateContent() {\n    const array = u.selectedValueArray(this.selected);\n    this.parent.init(array);\n}\n\nfunction articleToggleActive(e) {\n    if (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        console.log(e.code);\n    }\n\n    if (!this.selected) {\n        console.log('no selected element');\n        return;\n    }\n    // let versions;\n    let array = u.selectedValueArray(this.selected);\n\n    let { classList, dataset } = this.selected;\n    let { versions } = this.selected.dataset;\n    const locked = versions && versions.trim();\n\n    // only double alt (on keyboard) allows unlock\n    if (/^key/.test(e.type) && locked && window.confirm('Are you sure')) {\n        classList.remove('locked');\n        dataset.versions = '';\n        array = [''];\n\n        // empty lines are deleted from the DOM\n        if (this.selected.classList.contains('empty')) {\n            this.selected.innerText = '';\n            this.selected.className = '';\n            this.selected.remove();\n            this.selected = null;\n            this.parent.init(['']);\n            return false;\n        }\n    }\n\n    // re-load the sentence instatance\n    this.parent.init(array);\n    return false;\n}\n\nfunction typewriter() {\n    let forwardOnly = false; // private variable\n\n    return function(bool) {\n        return (forwardOnly = typeof bool === 'boolean' ? bool : forwardOnly);\n    };\n}\n\nfunction typewriterMode(e) {\n    // console.log(\"typewriter\", e.key, e.code);\n    if (!this.typewriter()) return;\n\n    e.preventDefault();\n    return false;\n}\n","import Texteditor from './Texteditor/';\nimport u from '../utilities/';\n\nclass Senetences extends Texteditor {\n    constructor(id, options) {\n        super(id, options);\n\n        // update the options\n        this.arrayToHtml(null, { hidden: true });\n\n        // create the local triggers\n        this.on('change', null, updateSelectedParagraph);\n        this.on('toggle', /^(shiftshift)$/i, toggleInactiveFlag);\n        this.on('capitalize', /^(altenter)$/i, toggleStringCase);\n        this.on('newline', /^(shiftenter)$/i, carridgeReturn);\n        this.on('deleteline', /^(altbackspace)$/i, deleteCurrentLine);\n        this.on('centeron', /^(controlcontrol)$/i, scrollToParagraph);\n        this.on('click', null, () => {});\n    }\n}\n\nexport default Senetences;\n\nfunction carridgeReturn(e) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const p = this.selected;\n    const cr = document.createElement('p');\n    const br = document.createElement('br');\n    const sel = window.getSelection();\n    const range = document.createRange();\n\n    p.parentNode.insertBefore(cr, p.nextSibling);\n    cr.appendChild(br);\n\n    range.setStart(br, 0); // Changed range to start of BR\n    range.collapse(true);\n    sel.removeAllRanges();\n    sel.addRange(range);\n\n    return false;\n}\n\nfunction deleteCurrentLine(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.selected.remove();\n}\n\nfunction toggleStringCase() {\n    const { innerText } = this.selected;\n    this.selected.innerText = u.toggleStringCase(innerText);\n}\n\nfunction updateSelectedParagraph() {\n    const { children } = this.texteditor;\n    const array = u.childrenToVersionArray(children);\n    this.parent.update(array);\n}\n\nfunction toggleInactiveFlag(e) {\n    this.selected.classList.toggle('inactive');\n}\n\nfunction scrollToParagraph(e) {\n    // scroll the Paragraph selected element into view\n    const selected = this.parent.texteditor.querySelector('.selected');\n    selected.scrollIntoViewIfNeeded(true);\n}\n","import uuid from '../../utilities/uuid';\nimport download from '../../utilities/download';\nimport readTextFile from '../../utilities/readTextFile';\nconst startup = require('./startup.json');\n\nclass Storage {\n    constructor(storage) {\n        this.key = null; // the current article's GUID\n        this.articles = this.list;\n        this.storage = storage;\n        this.uuid = uuid;\n        this.current = null; // currently open article\n        this.syncId = null;\n        this.timestamp = null;\n\n        this.create = createArticle.bind(this);\n    }\n\n    filename(guid, path) {\n        if (!guid) return;\n        return [path, guid].filter(s => s).join('-');\n    }\n\n    // sets the users syncID to not null\n    // this will cause the write method to\n    // push updates after the localstroage save\n    setSyncProfile(guid = null) {\n        console.log('Profile Sync', guid);\n        this.syncId = guid;\n        this.timestamp = new Date().valueOf();\n    }\n\n    // reads from localStorage\n    // guid: unique key\n    // example: rewrite-article-ace123ace123\n    read(guid) {\n        if (!guid) {\n            this.current = null;\n            return null;\n        }\n\n        const { storage, filename } = this;\n        const s = storage('settings');\n        const file = storage(filename(guid)).read();\n\n        if (!file) {\n            this.current = null;\n            return null;\n        }\n\n        if (!file.meta || !file.data) {\n            console.error(\n                'This article has incorrect schema. Missing meta and data'\n            );\n            return null;\n        }\n\n        //const meta = articles.read().find(obj => obj.guid === guid);\n        //const current = { ...meta, data: file, previous: guid };\n        let settings = s.read() || {};\n        settings.current = file.meta.uuid;\n        s.write(settings);\n\n        return (this.current = file);\n    }\n\n    // persists to localStorage\n    write(object) {\n        if (!object) return null;\n        console.log('write to filesystem', this.syncId);\n\n        const { current, filename, storage } = this;\n        const guid = current && current.guid;\n\n        if (!guid) {\n            console.log('no current guid');\n            return null;\n        }\n\n        const localkey = filename(guid);\n        const local = storage(localkey);\n\n        local.write(object, true);\n        local.backup();\n        // local.push(this.syncId);\n\n        // update last modified date\n        const articles = storage('articles');\n        let collection = articles.read();\n\n        // find current guid and pluck it out\n        const index = collection.findIndex(o => o.guid === guid);\n        const recent = collection.splice(index, 1)[0];\n\n        // update timestamp\n        recent.opened = new Date().valueOf();\n\n        // place most recently edited article first\n        collection = [recent, ...collection];\n\n        // save the updates to local\n        articles.write(collection, true);\n\n        this.current = { ...this.current, data: object };\n        return this.current;\n    }\n\n    // import\n    // parses JSON and plainText into a Article schema\n    // @value String or Object literal\n    import(value) {}\n\n    // export\n    // returns Object literal of Article schema\n    export() {}\n\n    // list\n    // returns an array of file metadata\n    // guid, name, created, opended, filesize ...\n    // the list can be filtered by regExp\n    list(filter) {\n        const articles = this.storage('articles');\n        return articles.read();\n    }\n\n    // open\n    // presents a file picker to load an external file\n    // same as import, without id or plainText string\n    open(e, fn) {\n        if (!e) {\n            console.error('Cant open, require files array');\n        }\n\n        const promise = readTextFile(e);\n        promise.then(object => {\n            const { name, result } = object;\n            return fn(name, result);\n        });\n    }\n\n    // save\n    // causes a download dialoge box to appear\n    // the filename derived from the currently selected file\n    save(filename) {\n        if (!this.current) {\n            console.error('No current article to download');\n            return;\n        }\n        const { guid, name, data } = this.current;\n        const metadata = {\n            id: guid,\n            name: filename || name,\n            data,\n        };\n\n        return download(metadata);\n    }\n\n    // rename\n    // assigns a new filename to the given guid\n    rename(article_id, filename) {\n        if (!article_id || !filename) return;\n\n        const list = this.list();\n        let index = list.findIndex(r => r.uuid === article_id);\n        let articles = this.storage('articles');\n        list[index].name = filename;\n        articles.write(list);\n\n        return true;\n    }\n\n    // delete\n    // deletes the associated files by guid\n    // and refreshes the articles list\n    delete(guid) {\n        if (!guid) {\n            console.log('Cant delete [%s]', guid);\n            return false;\n        }\n\n        const { storage } = this;\n        const { meta = null } = this.current || {};\n        const list = this.list().filter(r => r.uuid !== guid);\n        storage('articles').write(list);\n        storage(guid).delete();\n\n        if (meta && meta.uuid === guid) {\n            console.warn('Deleting current article %s', guid);\n            this.read(this.list()[0].uuid);\n        }\n\n        return true;\n    }\n\n    // initialize\n    // attempts to load previous article,\n    // or first article or blank or welcome page\n    initilize() {\n        const article_id = uuid();\n        const name = startup.meta.name;\n\n        const settings = this.storage('settings');\n        const { current = null } = settings.read() || {};\n\n        if (!this.list()) {\n            this.create(article_id, name, startup);\n            settings.write({ current: article_id });\n            console.warn('create default example article [%s]', article_id);\n        }\n\n        if (current) {\n            this.read(current);\n        }\n\n        return this.current;\n    }\n}\n\nexport default Storage;\n\nfunction createArticle(article_id, name, schema) {\n    if (!schema) {\n        console.error('Create requires article schema');\n        return;\n    }\n\n    // generate the initial metadata\n    article_id = article_id || uuid();\n    name = name || 'Untitled';\n    const created = new Date().valueOf();\n    const modified = new Date().valueOf();\n    const meta = { uuid: article_id, name, created, modified };\n\n    // append to list of articles\n    const articles = this.storage('articles');\n    const array = articles.read() || [];\n\n    const exists = array.findIndex(a => a.uuid === article_id);\n\n    // ensure the uuid is unique\n    // existing uuid will be updated\n    if (array && array.length && exists + 1) {\n        console.warn('UUID exists. Replace %s', article_id);\n        array.splice(exists, 1);\n    }\n\n    array.push(meta);\n    articles.write(array);\n\n    this.current = {\n        meta,\n        data: schema,\n    };\n\n    // save the article data\n    const key = this.filename(article_id);\n    this.storage(key).write(this.current);\n\n    return this.current;\n}\n","import React from 'react';\n\nclass ToggleToInput extends React.Component {\n    constructor(props) {\n        super();\n        this.state = {\n            edit: false,\n            name: props.name,\n            original: props.name,\n            guid: props.guid,\n        };\n    }\n\n    rename = (reset = false) => {\n        const { guid, name, original } = this.state;\n        let value = original;\n\n        if (!reset && name && name.trim() && name !== original) {\n            value = name.trim();\n            this.props.store.rename(guid, value);\n        }\n\n        this.setState({ edit: false, name: value, original: value });\n    };\n\n    toggleEditAndFocus = e => {\n        e.stopPropagation();\n        this.setState({ edit: true });\n        const { guid } = this.state;\n        setTimeout(() => document.querySelector(`#${guid}`).focus(), 150);\n    };\n\n    render() {\n        const { name, edit, guid } = this.state;\n        return !edit ? (\n            <span className=\"file-toggle-input\">\n                {name}\n                <a href=\"#edit\" onClick={this.toggleEditAndFocus}>\n                    edit\n                </a>\n            </span>\n        ) : (\n            <input\n                id={guid}\n                type=\"text\"\n                tabIndex=\"0\"\n                value={name}\n                onBlur={() => this.rename()}\n                onChange={e => {\n                    this.setState({ name: e.target.value });\n                }}\n                onClick={e => e.stopPropagation()}\n                onKeyDown={e => {\n                    let { key } = e;\n                    let reset = false;\n\n                    if (/^(escape)/i.test(key)) {\n                        key = 'enter';\n                        reset = true;\n                    }\n\n                    if (/^(enter)/i.test(key)) {\n                        this.rename(reset);\n                        e.target.blur();\n                    }\n                }}\n            />\n        );\n    }\n}\n\nexport default ToggleToInput;\n","import React from 'react';\nimport ToggleToInput from './ToggleToInput.js';\nimport elapsed from '../../utilities/elapsed';\n\nfunction FileRow({ object, callbacks }) {\n    const { guid, uuid, name, wordtarget, opened } = object;\n    const {\n        store,\n        getArticleByGuid,\n        updateCurrent,\n        handleDelete,\n        handleWordTarget,\n        downloadText,\n        downloadJson,\n    } = callbacks;\n\n    const target = wordtarget ? `${wordtarget} words` : `add`;\n    const article_id = guid || uuid;\n\n    return (\n        <div\n            className=\"inner\"\n            onClick={() => {\n                getArticleByGuid(article_id);\n                updateCurrent(article_id);\n            }}>\n            <span className=\"file-name\" data-guid={article_id}>\n                <ToggleToInput name={name} guid={article_id} store={store} />\n            </span>\n            <ul className=\"file-meta\">\n                <li>\n                    <a\n                        href=\"#delete\"\n                        onClick={e => {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            handleDelete(article_id);\n                        }}>\n                        del\n                    </a>\n                </li>\n                <li\n                    className=\"file-words\"\n                    onClick={e => handleWordTarget(e, wordtarget, article_id)}>\n                    Target: {target}\n                </li>\n\n                <li className=\"file-modified\">{elapsed(opened)}</li>\n                <li className=\"file-exports\">\n                    <a href=\"#txt\" onClick={downloadText}>\n                        txt\n                    </a>\n                    <a href=\"#json\" onClick={downloadJson}>\n                        json\n                    </a>\n                </li>\n            </ul>\n        </div>\n    );\n}\nexport default FileRow;\n","let A;\nlet B;\nlet vertical;\nlet dragging = false;\nlet notifySizeChange;\n\nlet state = {\n    width: 50, // initial ratio (percentage)\n    minWidth: 10, // min pixel width\n    threshold: 15, // screen width percentage\n};\n\nfunction settings(key, value) {\n    if (!key) return state;\n\n    // key, value pairs\n    const temp = {};\n    if (key.constructor !== Object && value !== undefined) {\n        temp[key] = value;\n        key = { ...temp };\n    }\n\n    state = { ...state, key };\n}\n\nfunction resize(e, value) {\n    if (!dragging && !value) return;\n\n    let { pageX } = e || {};\n\n    if (e) {\n        // prevent cursor selecting during drag\n        e.stopPropagation && e.stopPropagation();\n        e.preventDefault && e.preventDefault();\n        e.cancelBubble = true;\n        e.returnValue = false;\n    }\n\n    const { threshold, minWidth } = state;\n    const { innerWidth } = window;\n\n    pageX = pageX || ((value || 50) / 100) * innerWidth;\n    let width = value || Number((pageX / innerWidth) * 100);\n    width = Math.max(minWidth, width);\n    width = Math.min(100 - minWidth, width);\n\n    let percent = width;\n    A.classList.remove('hide-content');\n    B.classList.remove('hide-content');\n    vertical.classList.remove('hide-menu-left');\n    vertical.classList.remove('hide-menu-right');\n\n    if (width < threshold) {\n        // 15 (100-85) (innerWidth - minWidth) / innerWidth\n        percent = 100 * (minWidth / innerWidth);\n        A.classList.add('hide-content');\n        vertical.classList.add('hide-menu-left');\n    }\n    if (width > 100 - threshold) {\n        percent = 100 - 100 * ((minWidth * 1.5) / innerWidth);\n        B.classList.add('hide-content');\n        vertical.classList.add('hide-menu-right');\n    }\n\n    A.style.width = `${percent}%`;\n    B.style.width = `${100 - percent}%`;\n    vertical.style.left = `${percent}%`;\n\n    if (notifySizeChange) notifySizeChange(Number(percent));\n}\n\nconst elements = {};\nfunction update(id, html) {\n    elements[id].innerHTML = html;\n}\n\nfunction onResize(fn) {\n    notifySizeChange = fn;\n}\n\nfunction add(id) {\n    // add a div element container to the sidebar\n    // eg. the wordcounter\n    const div = document.createElement('div'); // Create a text node\n    div.id = id;\n    div.className = `divider-${id}`;\n    vertical.appendChild(div); // Append the text to <li>\n    elements[id] = div;\n}\n\nfunction initialize(width, mouse) {\n    vertical = document.querySelector('#vertical');\n    A = document.querySelector('.paragraphs');\n    B = document.querySelector('.sentences');\n\n    vertical.onmousedown = () => (dragging = true);\n    vertical.ondblclick = e => resize(e, 50);\n\n    mouse(null, 'up', () => (dragging = false));\n    mouse(null, 'move', resize);\n\n    // save(options);\n    state.width = width || 50;\n    resize(null, state.width);\n\n    console.log('resizer initialized');\n\n    return { resize, settings, add, update, onResize };\n}\n\nexport default initialize;\n","import React from 'react';\nimport u from '../../utilities/';\nimport Parse from '../../utilities/Parse';\n\nconst TTS = u.tts;\n\nclass Settings extends React.Component {\n    constructor(props) {\n        super();\n        this.article = props.article;\n        this.fs = u.storage('settings');\n\n        this.visible = props.visible;\n        this.state = {\n            guid: null,\n            current: null,\n            modifiers: {\n                collapsed: true,\n                strikethrough: true,\n                typewriter: false,\n                markdown: false,\n                dark: false,\n            },\n            values: {\n                fontsize: 24,\n                splitwidth: 50,\n                readability: 0,\n            },\n            visible: false,\n        };\n\n        // register TTS key trigger\n        props.keycapture(/^space/i, 'ctrlKey', this.readSelected);\n    }\n\n    componentDidMount() {\n        const settings = this.fs.read();\n\n        // visibility is a local state\n        // remove it to ensure settings visibility is not persisted\n        delete settings.visible;\n\n        let state = { ...this.state };\n        if (settings) {\n            state = {\n                ...state,\n                ...settings,\n            };\n            this.setState(state);\n        }\n        // apply the UI modifiers\n        for (let key in state.modifiers) {\n            console.log(key);\n            this.toggleClassName(key, state.modifiers[key]);\n        }\n\n        // apply the UI values\n        for (let key in state.values) {\n            if (this[key]) {\n                console.log(key, state.values[key]);\n                this[key](state.values[key]);\n            }\n        }\n    }\n\n    componentDidUpdate(prevProps) {\n        const updates = {};\n        if (this.props.current !== prevProps.current) {\n            updates.current = this.props.current;\n        }\n        if (this.props.guid !== prevProps.guid) {\n            updates.guid = this.props.guid;\n        }\n        if (this.props.splitwidth !== prevProps.splitwidth) {\n            updates.values = {\n                fontsize: this.state.values.fontsize,\n                splitwidth: this.props.splitwidth,\n            };\n        }\n        if (this.props.visible !== prevProps.visible) {\n            updates.visible = this.props.visible;\n        }\n\n        if (Object.keys(updates).length) {\n            console.log('settings got new props', updates);\n            this.setState({ ...updates });\n            this.save();\n        }\n    }\n\n    toggleClassName(string, value = null, selector = 'body') {\n        const { modifiers, values } = this.state;\n        const element = document.querySelector(selector);\n\n        let toggle = null;\n        toggle = typeof value === 'boolean' ? value : !modifiers[string];\n        toggle = Boolean(toggle);\n\n        const method = toggle ? 'add' : 'remove';\n\n        element.classList[method](string);\n\n        if (string in modifiers || string in values) {\n            modifiers[string] = toggle;\n        }\n\n        // only save UI interactions not\n        // initialization events that apply persisted values\n        // like componentDidMount\n        if (value === null) {\n            this.setState({ modifiers });\n            this.save();\n        }\n\n        return toggle === true;\n    }\n    getOnOff(name) {\n        const { modifiers } = this.state;\n        const bool = modifiers[name];\n        return bool ? (\n            <i className=\"icon-boolean-true\" />\n        ) : (\n            <i className=\"icon-boolean-false\" />\n        );\n    }\n    readSelected = e => {\n        e.stopPropagation();\n\n        const { selected = null, texteditor = null } = this.article;\n        const article = selected\n            ? document.createElement('article')\n            : texteditor.cloneNode(true);\n\n        // if there is a selected element,\n        // create a DOM collection of all following siblings\n        if (selected) {\n            let p = document.querySelector('.selected');\n            while (p) {\n                article.appendChild(p.cloneNode(true));\n                p = p.nextElementSibling;\n            }\n        }\n\n        console.log(article.innerText);\n        const p = new Parse(article.children, { filterInactive: true });\n        const plaintext = p.toText();\n\n        if (!plaintext) return;\n\n        TTS.read(plaintext);\n    };\n\n    getReadabilityLevel(int) {\n        const ratings = [\n            'Off',\n            'very-easy',\n            'easy',\n            'fairly-easy',\n            'plain-english',\n            'fairly-difficult',\n            'difficult',\n            'very-difficult',\n            'unknown', // empty string\n        ];\n        return ratings[int];\n    }\n    readability(value, persist = false) {\n        value = Number(value);\n        const method = value ? 'add' : 'remove';\n\n        const body = document.querySelector('body');\n        const classnames = body.className.replace(/readability-[0-9]/, '');\n        body.className = classnames;\n        body.classList[method](`readability-${value}`);\n        body.classList[method](`readability`);\n\n        if (!persist) return;\n        const values = this.state.values;\n        values.readability = Number(value);\n        this.setState({ values });\n        u.defer('readability', () => this.save(), 500);\n    }\n    fontsize(value, persist = false) {\n        document.querySelector('body').style.fontSize = `${value}px`;\n\n        if (!persist) return;\n        const values = this.state.values;\n        values.fontsize = Number(value);\n        this.setState({ values });\n        u.defer('fontsize', () => this.save(), 500);\n    }\n    save() {\n        // persist settings to localStorage\n        // and try to sync with the server\n        const { fs } = this;\n        u.defer(\n            'settings',\n            () => {\n                fs.write(this.state);\n                fs.updateSettings(this.state);\n            },\n            500\n        );\n    }\n\n    render() {\n        if (!this.state.visible) return null;\n        return (\n            <ul className=\"settings\">\n                <li>\n                    <div\n                        className=\"inner\"\n                        onClick={() => {\n                            this.toggleClassName('dark');\n                        }}>\n                        <strong>Toggle dark theme</strong>\n                        <em>{this.getOnOff('dark')}</em>\n                    </div>\n                </li>\n                <li>\n                    <div\n                        className=\"inner\"\n                        onClick={() => {\n                            this.toggleClassName('collapsed');\n                        }}>\n                        <strong>Collapse lines</strong>\n                        <em>{this.getOnOff('collapsed')}</em>\n                    </div>\n                </li>\n                <li>\n                    <div\n                        className=\"inner\"\n                        onClick={() => {\n                            this.toggleClassName('strikethrough');\n                        }}>\n                        <strong>Strike through</strong>\n                        <em>{this.getOnOff('strikethrough')}</em>\n                    </div>\n                </li>\n                <li className=\"no-underline\">\n                    <div className=\"inner\">\n                        <strong>Font size</strong>\n                        <em>\n                            {[\n                                this.state.values.fontsize,\n                                'px',\n                                '/',\n                                u.points(this.state.values.fontsize),\n                                'pt',\n                            ].join('')}\n                        </em>\n                    </div>\n                    <input\n                        type=\"range\"\n                        id=\"fontsize\"\n                        name=\"fontsize\"\n                        min=\"12\"\n                        max=\"48\"\n                        defaultValue={this.state.values.fontsize}\n                        onChange={e => {\n                            const { value } = e.target;\n                            this.fontsize(value, true);\n                        }}\n                    />\n                </li>\n                <li className=\"no-underline\">\n                    <div className=\"inner\">\n                        <strong>Readability</strong>\n                        <em>\n                            {this.getReadabilityLevel(\n                                Number(this.state.values.readability)\n                            )}\n                        </em>\n                    </div>\n                    <input\n                        type=\"range\"\n                        id=\"readability\"\n                        name=\"readability\"\n                        min=\"0\"\n                        max=\"7\"\n                        defaultValue={this.state.values.readability}\n                        onChange={e => {\n                            const { value } = e.target;\n                            this.readability(value, true);\n                        }}\n                    />\n                </li>\n                <li>\n                    <div\n                        className=\"inner\"\n                        onClick={() => {\n                            const { article } = this;\n                            const bool = this.toggleClassName('typewriter');\n\n                            let forward = article.typewriter(bool);\n                            forward = bool === undefined ? !forward : forward;\n                            article.typewriter(forward);\n                        }}>\n                        <strong>Typewriter mode</strong>\n                        <em>{this.getOnOff('typewriter')}</em>\n                    </div>\n                </li>\n                <li>\n                    <div className=\"inner\" onClick={this.readSelected}>\n                        <strong>Read aloud (BETA)</strong>\n                        <em>stop|start</em>\n                    </div>\n                </li>\n            </ul>\n        );\n    }\n}\n\nexport default Settings;\n","import u from '../../utilities/';\n\n// this function needs to be bound to this context\n// Dependancies:\n// this.setState()\n// this.getArticleByGuid()\n\nfunction syncWithServer(username) {\n    if (!username) {\n        console.warn('Require sync profile id');\n        return;\n    }\n\n    // sync with server\n    // 1. does this user exist?\n    // 2. get the remote articles\n    // 3. compare the modified timestamps\n    // 4. collect the articles that are newer thatn localStorage\n    // 5. push the new or more recent records to the server\n    //\n\n    console.log('Sync with server [%s]', username);\n\n    const fs = u.storage('articles');\n\n    const localtimestamps = {};\n    let localarticles = fs.updateArticlesData();\n    let current = localarticles[0].uuid;\n\n    localarticles.forEach(r => {\n        localtimestamps[r.uuid] = r.modified || r.opened;\n    });\n\n    return fs\n        .getUser(username)\n        .then(json => {\n            let meta, diff;\n            if (json && json.settings) {\n                u.storage('settings').write(json.settings);\n            }\n\n            current = (json.settings && json.settings.current) || current;\n\n            for (let row in json) {\n                if (/settings$/.test(row)) continue;\n                meta = json[row].meta;\n                meta.uuid = row;\n\n                if (!localtimestamps[row]) {\n                    console.log('Create local article [%s]', row);\n                    u.storage(row).write(json[row]);\n                    localarticles = localarticles.filter(r => r.uuid !== row);\n                    localarticles.push(meta);\n                    continue;\n                }\n                // there is a local version\n                // compare timestamp and keep newset\n                const local = u.storage(row).read();\n                const remote = json[row];\n\n                if (local > remote) {\n                    console.warn('Replace remote data', row, username, diff);\n                    fs.updateArticle(username, row, local);\n                    continue;\n                }\n\n                //console.log('replacing local copy %s', row);\n                u.storage(row).write(remote);\n            }\n        })\n        .then(() => {\n            this.getArticleByGuid(current);\n        })\n\n        .then(() => {\n            localarticles = fs.updateArticlesData();\n            this.setState({\n                articles: localarticles,\n                guid: username,\n                current: current,\n            });\n        });\n}\n\nexport default syncWithServer;\n","import defer from '../../utilities/defer';\n\n// function needs a this context\n// dependancies:\n// this.setState()\n// this.props\n// this.getUpdatedArticles()\n\nfunction registerMouseEvent() {\n    const html = document.querySelector('html');\n    const body = document.querySelector('body');\n    const sidebar = document.querySelector('#sidebar');\n\n    const zone = [5, sidebar.offsetWidth + 50]; // mouse trigger region\n    let showsidebar = body.classList.contains('show-sidebar');\n\n    this.props.mouse(null, 'move', e => {\n        const { pageX } = e;\n        zone[1] = sidebar.offsetWidth + 50;\n        showsidebar = body.classList.contains('show-sidebar');\n\n        if (!showsidebar && pageX > zone[0]) {\n            return;\n        }\n\n        if (pageX > zone[1]) {\n            body.classList.add('sidebar-close');\n            defer(\n                'animate',\n                () => {\n                    body.classList.remove('sidebar-close');\n                    body.classList.remove('show-sidebar');\n                    html.classList.remove('show-alternative');\n                },\n                250\n            );\n        }\n\n        // if (pageX < zone[0] || (showsidebar && pageX < zone[1])) {\n        if (pageX < zone[0]) {\n            // refresh the articles list\n            this.setState({ articles: this.getUpdatedArticles() });\n            body.classList.add('show-sidebar');\n            defer(\n                'sidebar',\n                () =>\n                    pageX > zone[1]\n                        ? body.classList.remove('show-sidebar')\n                        : null,\n                500\n            );\n        }\n    });\n}\n\nexport default registerMouseEvent;\n","import React from 'react';\n\nfunction SidebarButton(props) {\n    const { value, text, mode, handler } = props;\n\n    return (\n        <a\n            href=\"#show-settings\"\n            className={\n                'sidebar-mode-toggle' + (mode === value ? ' selected' : '')\n            }\n            onClick={e => {\n                e.preventDefault();\n                handler(value);\n            }}>\n            {text}\n        </a>\n    );\n}\n\nexport default SidebarButton;\n","import React from 'react';\nimport Parse from '../../utilities/Parse';\nimport u from '../../utilities/';\nimport FileRow from './FileRow';\nimport Settings from './Settings';\nimport divider from '../divider';\nimport syncWithServer from '../Sidebar/syncWithServer.js';\nimport registerMouseEvent from '../Sidebar/registerMouseEvent';\nimport SidebarButton from '../Sidebar/SidebarButton';\n\nconst { read } = u.storage('settings');\nconst html = document.querySelector('html');\nconst TTS = u.tts;\n\n// a keypress toggle. 1st press = on, 2nd press = off\n// different platforms have strange quirks with holding down keys + clicking\n\nconst keydown = [];\nfunction keycapture(key, modifier, fn) {\n    console.log('register key capture', key, modifier);\n    keydown.push([key, modifier, fn]);\n}\n\nwindow.onkeydown = e => {\n    keydown.some((row, i) => {\n        // console.log('%s) [%s]', i, e.code, row[0].test(e.code), e[row[1]]);\n        return row[0].test(e.code) && e[row[1]] && row[2](e);\n    });\n};\n\nkeycapture(/^alt/i, 'altKey', e => {\n    let method, className;\n    if (e.altKey) {\n        className = 'show-alternative';\n        method = html.classList.contains(className) ? 'remove' : 'add';\n        html.classList[method](className);\n    }\n    if (e.crtlKey && e.code === 'Space') {\n        e.stopPropagation();\n\n        const { selected = null, texteditor = null } = this.article;\n        const el =\n            selected && selected.innerText.trim() ? selected : texteditor;\n        if (!el || !el.innerText) return;\n\n        TTS.read(el.innerText);\n    }\n});\n\nclass Sidebar extends React.Component {\n    constructor(props) {\n        super();\n\n        const settings = read() || {};\n        this.defaultData = props.store.initilize();\n\n        //this.defaultdata = props.store.initalize();\n        this.state = Object.assign(\n            {},\n            {\n                guid: null,\n                current: null,\n                splitwidth: 50,\n                articles: [],\n                mode: 0,\n            },\n            settings,\n            { articles: props.store.list() }\n        );\n\n        // bind the onAfter event to persit the data\n        props.article.on('after', null, this.saveToDisk.bind(this));\n        props.sentences.on('after', null, this.saveToDisk.bind(this));\n\n        // bind external functions\n        this.syncWithServer = syncWithServer.bind(this);\n        this.registerMouseEvent = registerMouseEvent.bind(this);\n    }\n    componentDidMount() {\n        // update with persisted data\n        const { guid = null, values = null } = this.state;\n        const { splitwidth = 50 } = values || {};\n\n        if (guid && navigator.onLine) {\n            console.log('SYNC WITH SERVER');\n            this.props.store.setSyncProfile(guid);\n            this.syncWithServer(guid);\n        } else {\n            console.log('load the default data. no server sync.');\n            this.props.article.init(this.defaultData);\n        }\n\n        // instanate the divider\n        this.mouse = this.props.mouse;\n        this.divider = divider(splitwidth, this.mouse);\n        this.divider.add('wordcount');\n        this.divider.onResize(this.saveDividerWidth);\n\n        // bind the wordcounter events\n        this.props.article.on('wordcounter', null, d =>\n            this.updateWordCount(d)\n        );\n        this.props.sentences.on('wordcounter', null, () =>\n            this.props.article.wordcounter()\n        );\n\n        this.registerMouseEvent();\n    }\n\n    saveToDisk = () => {\n        u.defer(\n            'savearticle',\n            () => {\n                const { article } = this.props;\n                const { current, guid, articles } = this.state;\n                const fs = u.storage(current);\n\n                const children = article.texteditor.children;\n                const data = new Parse(children).toCollection();\n\n                let meta = articles.find(r => r.uuid === current);\n\n                if (!meta) {\n                    console.log('No meta data. New article?');\n                    meta = fs.read().meta;\n                }\n\n                const payload = { data, meta };\n                payload.meta.modified = new Date().valueOf();\n\n                fs.write(payload);\n                fs.updateArticle(guid, current, payload);\n                const newarticles = fs.updateArticlesData();\n\n                this.setState({ articles: newarticles, current, guid });\n            },\n            1500\n        );\n    };\n\n    saveDividerWidth = value => {\n        u.defer(\n            'splitwidth',\n            () => {\n                console.log('save divider width', value);\n                this.setState({ splitwidth: value });\n            },\n            750\n        );\n    };\n\n    getUpdatedArticles() {\n        const { store } = this.props;\n        const articles = store.list();\n        return articles || null;\n    }\n\n    updateCurrent = current => {\n        let settings = this.state;\n        settings.current = current;\n\n        this.setState(settings);\n\n        const body = document.querySelector('body');\n        body.classList.add('sidebar-close');\n\n        u.defer(\n            'animate',\n            () => {\n                body.classList.remove('sidebar-close');\n                body.classList.remove('show-sidebar');\n            },\n            350\n        );\n    };\n\n    getArticleByGuid = article_id => {\n        const { store, article } = this.props;\n        const fileObj = store.read(article_id);\n        if (!fileObj) {\n            console.warn('No article by that uuid [%s]', article_id);\n            return;\n        }\n        const { data, wordtarget = 0 } = fileObj;\n        article.setWordTarget(wordtarget);\n        return article.reset(data);\n    };\n\n    updateWordCount(words) {\n        this.divider.update('wordcount', words);\n    }\n    handleWordTarget = (e, wordtarget = 0, article_id) => {\n        e.preventDefault();\n        e.stopPropagation();\n        const el = e.target;\n        const data = u.storage(article_id);\n        const article = data.read();\n        const value = u.prompt(\n            'Enter a word count target for this document.',\n            wordtarget\n        );\n\n        article.meta.wordtarget = Number(value) || 0;\n        data.write(article);\n        data.update(article);\n        el.innerHTML = `Target ${value || ': add'}`;\n        console.log('set word targetr', this.state.current, article_id);\n        if (this.state.current !== article_id) return;\n        // update the wordcounter\n        this.props.article.setWordTarget(value);\n        this.props.article.wordcounter();\n    };\n    getArticles() {\n        const articles = this.getUpdatedArticles();\n\n        if (!articles || !articles.length) return;\n        let current = this.state.current || articles[0].uuid;\n\n        const { store } = this.props;\n        let callbacks = {\n            getArticleByGuid: this.getArticleByGuid,\n            updateCurrent: this.updateCurrent,\n            handleDelete: this.handleDelete,\n            handleWordTarget: this.handleWordTarget,\n            store,\n            downloadText: this.download('text'),\n            downloadJson: this.download('json'),\n        };\n\n        let files = null;\n\n        files = articles.map((obj, n) => {\n            const key = obj.guid || obj.uuid;\n            const selected = key === current ? 'selected' : '';\n\n            return (\n                <li key={key} className={selected}>\n                    <FileRow object={obj} callbacks={callbacks} />\n                </li>\n            );\n        });\n\n        return (\n            <div id=\"files\">\n                <hr />\n                <ul>{files}</ul>\n            </div>\n        );\n    }\n\n    handleDelete = ariticle_id => {\n        const { store } = this.props;\n        const msg = 'You are about to delete this file.\\nAre you sure?';\n        if (!window.confirm(msg)) return false;\n\n        store.delete(ariticle_id); // deletes and update articles list\n        u.storage().deleteArticle(ariticle_id);\n        const articles = store.list();\n\n        // if the deleted article is the current one, reload with\n        // the first available article in the article list\n        if (ariticle_id === this.state.current && articles.length) {\n            ariticle_id = articles[0].uuid;\n            console.log('Delete current. re-initalize editors', ariticle_id);\n            this.getArticleByGuid(ariticle_id);\n        }\n\n        ariticle_id = articles.length ? ariticle_id : null;\n        this.setState({ articles, current: ariticle_id });\n    };\n\n    makeEditable = (e, name, guid) => {\n        e.stopPropagation();\n        const { rename } = this.props.store;\n        console.log(123, name, guid);\n\n        return (\n            <input\n                type=\"text\"\n                defaultValue={name}\n                onBlur={e => rename(guid, e.target.value)}\n                onKeyPress={e => {\n                    e.stopPropagation();\n                    if (/enter/i.test(e.key)) {\n                        e.target.blur();\n                        rename(guid, e.target.value);\n                    }\n                    return true;\n                }}\n            />\n        );\n    };\n\n    handleImport = e => {\n        // import the document and re-set the editor and current id\n        // save to localStorage, update articles list and try to sync to server.\n        const { store } = this.props;\n        const { getArticleByGuid, updateCurrent } = this;\n        const that = this;\n        store.open(e, function(name, text) {\n            const p = new Parse(text);\n            const a = store.create(null, name, p.toCollection());\n            const { uuid } = a.meta;\n            const { guid } = that.state;\n            // article.reset(current.data);\n            // that.setState({ articles: store.list(), current: current.current });\n            console.log('Import user:[%s] uuid[%s]', guid, uuid, a);\n            getArticleByGuid(uuid);\n            updateCurrent(uuid);\n            u.storage().updateArticle(guid, uuid, a);\n        });\n    };\n\n    handleDataRestore = e => {\n        const { restore } = u.backupRestore;\n        const { readTextFile } = u;\n        const { updateArticle, updateArticlesData } = u.storage();\n        const ns = 'rewrite';\n        let settings;\n        let username = this.state.guid || null;\n        const domId = e.target.id;\n\n        const promise = readTextFile(e);\n        promise\n            .then(object => {\n                const { result } = object;\n                const data = JSON.parse(result);\n                const keys = Object.keys(data);\n                const valid = keys.filter(k => /(articles|settings)$/i.test(k));\n\n                settings = data.settings || {};\n                username = settings.guid || username;\n\n                // restore if there is data integrity\n                if (!valid.length === 2) {\n                    console.error('Restore failed integrity check', data);\n                    return;\n                }\n\n                const warning =\n                    'You are about to overwrite existing data.\\nAre you sure?';\n                const contd = u.confirm(warning);\n                if (!contd) return;\n\n                return restore(ns, data);\n            })\n            .then(data => {\n                return updateArticlesData();\n            })\n            .then(array => {\n                this.setState({ articles: this.getUpdatedArticles() });\n                document.querySelector('#' + domId).value = '';\n                return array;\n            })\n            .then(metaArray => {\n                // if we have a syncID push to remote server\n\n                if (!username) {\n                    console.log('Cant sync. No username');\n                    return;\n                }\n\n                metaArray.forEach(obj => {\n                    const article_id = obj.uuid;\n                    const data = u.storage(article_id).read();\n                    updateArticle(username, article_id, data);\n                });\n            });\n    };\n\n    download = (mime = 'text') => {\n        const method =\n            {\n                text: 'toText',\n                markdown: 'toMarkdown',\n                json: 'toCollection',\n            }[mime] || 'text';\n        const { state } = this;\n\n        return e => {\n            e.preventDefault();\n            e.stopPropagation();\n\n            const saveAs = e.altKey ? true : false;\n            const { current } = state;\n            const fs = u.storage(current);\n\n            let { data, meta } = fs.read(current);\n            let { name, uuid } = meta;\n            const date = new Date()\n                .toISOString()\n                .replace(/:\\d+.\\d+.$/, '')\n                .replace('T', ' ');\n\n            // pressing a ket modifier presents the save-as prompt\n            const filename = saveAs\n                ? u.prompt(`Enter filename`, `${name}-${date}`)\n                : name;\n            if (!name || !name.trim()) {\n                console.log('No file name', current, uuid, name, data);\n                return;\n            }\n\n            const p = new Parse(data);\n            const object = {\n                name: filename,\n                id: uuid,\n                data: p[method](),\n                type: mime,\n                appendId: false,\n            };\n            return u.download(object);\n        };\n    };\n\n    render() {\n        const actions = visible => {\n            if (!visible) return null;\n            return (\n                <div>\n                    <ul className=\"actions\">\n                        <li>\n                            <div\n                                className=\"inner\"\n                                onClick={() => {\n                                    const a = this.props.store.create(\n                                        null,\n                                        'Untitled',\n                                        [{ text: 'New document ...' }]\n                                    );\n\n                                    this.getArticleByGuid(a.meta.uuid);\n                                    this.updateCurrent(a.meta.uuid);\n                                    return;\n                                }}>\n                                New\n                            </div>\n                        </li>\n                        <li>\n                            <label htmlFor=\"uploadInput\" className=\"inner\">\n                                <span>Open</span>\n                                <input\n                                    id=\"uploadInput\"\n                                    className=\"hidden\"\n                                    onChange={this.handleImport}\n                                    type=\"file\"\n                                    accept=\"text/*\"\n                                />\n                            </label>\n                        </li>\n                        <li>\n                            <div\n                                className=\"inner\"\n                                onClick={this.download('text')}>\n                                <span>\n                                    Save{' '}\n                                    <i className=\"on-alternative-inline\">As</i>\n                                </span>\n                            </div>\n                        </li>\n                        <div className=\"on-alternative\">\n                            <li>\n                                <div\n                                    className=\"inner\"\n                                    onClick={() => {\n                                        const { download, backupRestore } = u;\n                                        const { backup } = backupRestore;\n\n                                        const data = backup('rewrite');\n                                        const meta = {\n                                            name: 'rewriting-backup',\n                                            id: new Date().toISOString(),\n                                            data,\n                                        };\n                                        return download(meta);\n                                    }}>\n                                    <span>Backup</span>\n                                </div>\n                            </li>\n                            <li>\n                                <label htmlFor=\"restoreData\" className=\"inner\">\n                                    <span>Restore</span>\n                                    <input\n                                        id=\"restoreData\"\n                                        className=\"hidden\"\n                                        onChange={this.handleDataRestore}\n                                        type=\"file\"\n                                        accept=\"text/json\"\n                                    />\n                                </label>\n                            </li>\n                            <li>\n                                <div\n                                    className=\"inner\"\n                                    onClick={() => {\n                                        const guid = u.prompt(\n                                            'Enter your sync id:'\n                                        );\n                                        this.syncWithServer(guid);\n                                        console.log('state', this.state);\n                                    }}>\n                                    <span>Sync Profile</span>\n                                    <em>{this.state.guid || 'Not syncing'}</em>\n                                </div>\n                            </li>\n                        </div>\n                    </ul>\n                    {this.getArticles()}\n                </div>\n            );\n        };\n        const settings = visible => {\n            return (\n                <div className=\"sidebar-settings\">\n                    <Settings\n                        article={this.props.article}\n                        guid={this.state.guid}\n                        current={this.state.current}\n                        keycapture={keycapture}\n                        visible={visible}\n                        splitwidth={this.state.splitwidth}\n                    />\n                </div>\n            );\n        };\n\n        return (\n            <div className=\"sidebar-content\">\n                {actions(Number(this.state.mode) === 0)}\n                {settings(Number(this.state.mode) === 1)}\n                <div className=\"sidebar-mode-switch\">\n                    <SidebarButton\n                        text=\"files\"\n                        handler={i => this.setState({ mode: 0 })}\n                        mode={this.state.mode}\n                        value={0}\n                    />\n                    <SidebarButton\n                        text=\"settings\"\n                        handler={i => this.setState({ mode: 1 })}\n                        mode={this.state.mode}\n                        value={1}\n                    />\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Sidebar;\n","import u from './utilities/';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Article from './modules/Article';\nimport Sentences from './modules/Sentences';\nimport Storage from './modules/Storage/';\nimport Sidebar from './modules/Sidebar/';\n\nimport './styles.scss';\n\nconst mouseEvents = {\n    up: [],\n    move: [],\n};\n\nfunction mouse(e, method, fn) {\n    if (fn) return mouseEvents[method].push(fn);\n    mouseEvents[method].forEach(callback => callback(e));\n}\n\nwindow.onmouseup = e => mouse(e, 'up');\nwindow.onmousemove = e => mouse(e, 'move');\n\nconst store = new Storage(u.storage.bind(window));\nconst article = new Article('c1', { prefix: 'a', hidden: true });\nconst sentences = new Sentences('c2', { prefix: 's', hidden: true });\n\narticle.bindTo(sentences);\nsentences.bindTo(article);\n\nwindow.RE = {\n    storage: store,\n    article: article,\n};\n\n(function() {\n    setTimeout(() => {\n        document.querySelector('.container').classList.remove('hidden');\n        document.querySelector('.sidebar').classList.remove('hidden');\n        document.querySelector('.overlay').classList.add('hidden');\n\n        // init delay required for scrollIntoViewIfNeeded()\n        //article.init((articleText && articleText.data) || ['']);\n    }, 1000);\n})();\n\n// Sidebar is a React component\nconst sidebar = document.querySelector('#sidebar');\nReactDOM.render(\n    <Sidebar\n        store={store}\n        article={article}\n        sentences={sentences}\n        mouse={mouse}\n    />,\n    sidebar\n);\n\n// Use react to prevent start-up lag\nconst overlay = document.querySelector('#overlay');\nReactDOM.render(\n    <div className=\"brand\">\n        <img src=\"./static/images/rewriting.svg\" alt=\"writing is rewriting\" />\n    </div>,\n    overlay\n);\n"],"sourceRoot":""}